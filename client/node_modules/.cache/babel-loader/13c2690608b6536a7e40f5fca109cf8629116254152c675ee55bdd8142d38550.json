{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\emil\\\\OneDrive\\\\Documents\\\\development\\\\apiDevelopment\\\\pubg-tournament-tracker\\\\client\\\\src\\\\components\\\\common\\\\LiveMatchFeed.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, memo } from 'react';\nimport { useSocket } from '../../contexts/SocketContext';\n\n// Optimized implementation of a live match feed component\n// Using React.memo to prevent unnecessary re-renders\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LiveMatchFeed = /*#__PURE__*/_s(/*#__PURE__*/memo(_c = _s(({\n  matchId,\n  initialMatchData\n}) => {\n  _s();\n  const [events, setEvents] = useState([]);\n  const [isLive, setIsLive] = useState(false);\n  const eventContainerRef = useRef(null);\n  const {\n    subscribeToEvent\n  } = useSocket();\n\n  // Set up socket subscription\n  useEffect(() => {\n    console.log(`LiveMatchFeed mounting for match: ${matchId}`);\n\n    // Simulate initial events from the match data\n    if (initialMatchData) {\n      const fakeEvents = [{\n        id: 1,\n        type: 'match_start',\n        message: 'Match started',\n        timestamp: new Date().toISOString()\n      }, {\n        id: 2,\n        type: 'info',\n        message: 'Initial match data loaded',\n        timestamp: new Date().toISOString()\n      }];\n      setEvents(fakeEvents);\n    }\n\n    // Set up live connection - with error handling\n    let unsubscribe = () => {};\n    try {\n      if (subscribeToEvent) {\n        setIsLive(true);\n\n        // Subscribe to match events\n        unsubscribe = subscribeToEvent(`match:${matchId}:event`, eventData => {\n          // Process incoming event\n          console.log('Received match event:', eventData);\n\n          // Add to events with a functional update to avoid stale state\n          setEvents(prevEvents => [...prevEvents, {\n            id: Date.now(),\n            ...eventData,\n            timestamp: new Date().toISOString()\n          }]);\n        });\n      }\n    } catch (error) {\n      console.error('Error setting up match event subscription:', error);\n      setIsLive(false);\n    }\n\n    // Clean up subscription on unmount\n    return () => {\n      console.log(`LiveMatchFeed unmounting for match: ${matchId}`);\n      try {\n        unsubscribe();\n      } catch (error) {\n        console.error('Error cleaning up socket subscription:', error);\n      }\n    };\n  }, [matchId, initialMatchData, subscribeToEvent]);\n\n  // Auto-scroll to bottom of events when new events arrive\n  useEffect(() => {\n    if (eventContainerRef.current) {\n      eventContainerRef.current.scrollTop = eventContainerRef.current.scrollHeight;\n    }\n  }, [events.length]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"live-match-feed-container\",\n    style: {\n      padding: '15px',\n      border: '1px solid #ddd',\n      borderRadius: '8px',\n      background: '#f9f9f9',\n      transform: 'translateZ(0)',\n      willChange: 'transform'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"feed-header\",\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '15px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          margin: 0\n        },\n        children: \"Live Match Feed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"connection-status\",\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          fontSize: '14px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            display: 'inline-block',\n            width: '10px',\n            height: '10px',\n            borderRadius: '50%',\n            backgroundColor: isLive ? '#4caf50' : '#f44336',\n            marginRight: '5px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), isLive ? 'Live' : 'Disconnected']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: eventContainerRef,\n      className: \"event-container\",\n      style: {\n        height: '300px',\n        overflowY: 'auto',\n        border: '1px solid #ddd',\n        borderRadius: '4px',\n        backgroundColor: 'white',\n        padding: '10px'\n      },\n      children: events.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-events\",\n        style: {\n          textAlign: 'center',\n          padding: '20px',\n          color: '#999'\n        },\n        children: \"No events yet. Waiting for match updates...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this) : events.map(event => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `event-item event-${event.type}`,\n        style: {\n          padding: '8px',\n          marginBottom: '8px',\n          borderLeft: '3px solid #2196F3',\n          backgroundColor: '#f0f8ff'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"event-time\",\n          style: {\n            fontSize: '12px',\n            color: '#777'\n          },\n          children: new Date(event.timestamp).toLocaleTimeString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"event-message\",\n          children: event.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 15\n        }, this)]\n      }, event.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"feed-footer\",\n      style: {\n        marginTop: '10px',\n        fontSize: '13px',\n        color: '#666'\n      },\n      children: \"This is a simulated live feed for demonstration purposes.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}, \"4HIdcei8/BQn1xWesfzbPbyr7Q0=\", false, function () {\n  return [useSocket];\n})), \"4HIdcei8/BQn1xWesfzbPbyr7Q0=\", false, function () {\n  return [useSocket];\n});\n\n// Add a displayName for debugging\n_c2 = LiveMatchFeed;\nLiveMatchFeed.displayName = 'LiveMatchFeed';\nexport default LiveMatchFeed;\nvar _c, _c2;\n$RefreshReg$(_c, \"LiveMatchFeed$memo\");\n$RefreshReg$(_c2, \"LiveMatchFeed\");","map":{"version":3,"names":["React","useState","useEffect","useRef","memo","useSocket","jsxDEV","_jsxDEV","LiveMatchFeed","_s","_c","matchId","initialMatchData","events","setEvents","isLive","setIsLive","eventContainerRef","subscribeToEvent","console","log","fakeEvents","id","type","message","timestamp","Date","toISOString","unsubscribe","eventData","prevEvents","now","error","current","scrollTop","scrollHeight","length","className","style","padding","border","borderRadius","background","transform","willChange","children","display","justifyContent","alignItems","marginBottom","margin","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","width","height","backgroundColor","marginRight","ref","overflowY","textAlign","color","map","event","borderLeft","toLocaleTimeString","marginTop","_c2","displayName","$RefreshReg$"],"sources":["C:/Users/emil/OneDrive/Documents/development/apiDevelopment/pubg-tournament-tracker/client/src/components/common/LiveMatchFeed.js"],"sourcesContent":["import React, { useState, useEffect, useRef, memo } from 'react';\nimport { useSocket } from '../../contexts/SocketContext';\n\n// Optimized implementation of a live match feed component\n// Using React.memo to prevent unnecessary re-renders\nconst LiveMatchFeed = memo(({ matchId, initialMatchData }) => {\n  const [events, setEvents] = useState([]);\n  const [isLive, setIsLive] = useState(false);\n  const eventContainerRef = useRef(null);\n  const { subscribeToEvent } = useSocket();\n\n  // Set up socket subscription\n  useEffect(() => {\n    console.log(`LiveMatchFeed mounting for match: ${matchId}`);\n    \n    // Simulate initial events from the match data\n    if (initialMatchData) {\n      const fakeEvents = [\n        { id: 1, type: 'match_start', message: 'Match started', timestamp: new Date().toISOString() },\n        { id: 2, type: 'info', message: 'Initial match data loaded', timestamp: new Date().toISOString() }\n      ];\n      setEvents(fakeEvents);\n    }\n\n    // Set up live connection - with error handling\n    let unsubscribe = () => {};\n    try {\n      if (subscribeToEvent) {\n        setIsLive(true);\n        \n        // Subscribe to match events\n        unsubscribe = subscribeToEvent(`match:${matchId}:event`, (eventData) => {\n          // Process incoming event\n          console.log('Received match event:', eventData);\n          \n          // Add to events with a functional update to avoid stale state\n          setEvents(prevEvents => [...prevEvents, {\n            id: Date.now(),\n            ...eventData,\n            timestamp: new Date().toISOString()\n          }]);\n        });\n      }\n    } catch (error) {\n      console.error('Error setting up match event subscription:', error);\n      setIsLive(false);\n    }\n\n    // Clean up subscription on unmount\n    return () => {\n      console.log(`LiveMatchFeed unmounting for match: ${matchId}`);\n      try {\n        unsubscribe();\n      } catch (error) {\n        console.error('Error cleaning up socket subscription:', error);\n      }\n    };\n  }, [matchId, initialMatchData, subscribeToEvent]);\n\n  // Auto-scroll to bottom of events when new events arrive\n  useEffect(() => {\n    if (eventContainerRef.current) {\n      eventContainerRef.current.scrollTop = eventContainerRef.current.scrollHeight;\n    }\n  }, [events.length]);\n\n  return (\n    <div className=\"live-match-feed-container\" style={{ \n      padding: '15px', \n      border: '1px solid #ddd', \n      borderRadius: '8px',\n      background: '#f9f9f9',\n      transform: 'translateZ(0)',\n      willChange: 'transform' \n    }}>\n      <div className=\"feed-header\" style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '15px'\n      }}>\n        <h3 style={{ margin: 0 }}>Live Match Feed</h3>\n        <div className=\"connection-status\" style={{\n          display: 'flex',\n          alignItems: 'center',\n          fontSize: '14px'\n        }}>\n          <span style={{ \n            display: 'inline-block',\n            width: '10px',\n            height: '10px',\n            borderRadius: '50%',\n            backgroundColor: isLive ? '#4caf50' : '#f44336',\n            marginRight: '5px'\n          }}></span>\n          {isLive ? 'Live' : 'Disconnected'}\n        </div>\n      </div>\n      \n      <div \n        ref={eventContainerRef} \n        className=\"event-container\" \n        style={{ \n          height: '300px', \n          overflowY: 'auto',\n          border: '1px solid #ddd',\n          borderRadius: '4px',\n          backgroundColor: 'white',\n          padding: '10px'\n        }}\n      >\n        {events.length === 0 ? (\n          <div className=\"no-events\" style={{ textAlign: 'center', padding: '20px', color: '#999' }}>\n            No events yet. Waiting for match updates...\n          </div>\n        ) : (\n          events.map(event => (\n            <div \n              key={event.id}\n              className={`event-item event-${event.type}`} \n              style={{\n                padding: '8px',\n                marginBottom: '8px',\n                borderLeft: '3px solid #2196F3',\n                backgroundColor: '#f0f8ff'\n              }}\n            >\n              <div className=\"event-time\" style={{ fontSize: '12px', color: '#777' }}>\n                {new Date(event.timestamp).toLocaleTimeString()}\n              </div>\n              <div className=\"event-message\">\n                {event.message}\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n      \n      <div className=\"feed-footer\" style={{ marginTop: '10px', fontSize: '13px', color: '#666' }}>\n        This is a simulated live feed for demonstration purposes.\n      </div>\n    </div>\n  );\n});\n\n// Add a displayName for debugging\nLiveMatchFeed.displayName = 'LiveMatchFeed';\n\nexport default LiveMatchFeed;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}