{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\emil\\\\OneDrive\\\\Documents\\\\development\\\\apiDevelopment\\\\pubg-tournament-tracker\\\\client\\\\src\\\\pages\\\\tournaments\\\\TournamentDetails.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useParams, Link, useLocation, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport tournamentService from '../../services/tournamentService';\nimport { useSocket } from '../../contexts/SocketContext';\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\nimport TournamentLeaderboard from '../../components/tournaments/TournamentLeaderboard';\nimport Modal from '../../components/common/Modal';\nimport AddTeamToTournament from '../../components/common/AddTeamToTournament';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TournamentDetails = () => {\n  _s();\n  var _tournament$teams, _tournament$matches2, _tournament$matches3;\n  const {\n    id: tournamentId\n  } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [tournament, setTournament] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeTab, setActiveTab] = useState('overview');\n  const [calculatingStandings, setCalculatingStandings] = useState(false);\n  const [isAddTeamModalOpen, setIsAddTeamModalOpen] = useState(false);\n  const {\n    joinMatch,\n    leaveMatch,\n    subscribeToEvent,\n    emitEvent\n  } = useSocket();\n  const [realTimeUpdates, setRealTimeUpdates] = useState([]);\n\n  // Create wrapper functions for joinMatch and leaveMatch using useCallback to prevent rerenders\n  const joinTournament = useCallback(tournamentId => {\n    console.log('Joining tournament room:', tournamentId);\n    if (joinMatch) {\n      joinMatch(`tournament:${tournamentId}`);\n    }\n  }, [joinMatch]);\n  const leaveTournament = useCallback(tournamentId => {\n    console.log('Leaving tournament room:', tournamentId);\n    if (leaveMatch) {\n      leaveMatch(`tournament:${tournamentId}`);\n    }\n  }, [leaveMatch]);\n\n  // Create wrapper for subscribeTournamentUpdates\n  const subscribeTournamentUpdates = useCallback(callback => {\n    console.log('Setting up tournament updates subscription');\n    return subscribeToEvent('tournament-update', callback);\n  }, [subscribeToEvent]);\n\n  // Use ref to track if we've already fetched the data to prevent duplicate requests\n  const dataFetchedRef = useRef(false);\n\n  // Use a ref to track if we're already fetching data to prevent duplicate requests\n  const fetchingRef = useRef(false);\n\n  // Use a debounced fetch function to prevent rapid consecutive calls\n  const fetchTournamentData = useCallback(async () => {\n    // Return early if already fetching or lacking a tournament ID\n    if (fetchingRef.current || !tournamentId) {\n      console.log('Skipping redundant fetch, already in progress or missing ID');\n      return;\n    }\n    try {\n      var _response$data;\n      // Mark that we're fetching to prevent duplicate requests\n      fetchingRef.current = true;\n      setLoading(true);\n      console.log(`Fetching tournament data for ID: ${tournamentId}`);\n      const response = await tournamentService.getTournamentById(tournamentId);\n      // Log the entire response for debugging\n      console.log(`Raw response:`, response);\n\n      // Check for different response structures and handle accordingly\n      let tournamentData = null;\n\n      // Case 1: Standard format - response.data.data\n      if (response !== null && response !== void 0 && (_response$data = response.data) !== null && _response$data !== void 0 && _response$data.data) {\n        tournamentData = response.data.data;\n      }\n      // Case 2: Simplified format - response.data\n      else if (response !== null && response !== void 0 && response.data && !response.data.data) {\n        tournamentData = response.data;\n      }\n      // Case 3: Direct data format\n      else if (response && !response.data) {\n        tournamentData = response;\n      }\n      if (tournamentData) {\n        console.log('Tournament data successfully loaded:', tournamentData.name || 'unnamed');\n        setTournament(tournamentData);\n        setError(null);\n      } else {\n        console.error('Could not extract tournament data from response. Format not recognized:', response);\n        setError('Failed to load tournament data - response format not recognized');\n      }\n    } catch (err) {\n      console.error('Error fetching tournament data:', err);\n      setError('Failed to load tournament data');\n\n      // If we get a 429 error, don't try again immediately\n      if (err.response && err.response.status === 429) {\n        console.warn('Rate limit exceeded. Waiting before retrying...');\n      }\n    } finally {\n      setLoading(false);\n      // Reset fetching flag after a small delay to prevent immediate re-fetch\n      setTimeout(() => {\n        fetchingRef.current = false;\n      }, 500);\n    }\n  }, [tournamentId]);\n  useEffect(() => {\n    // Fetch tournament data once when component mounts\n    if (!dataFetchedRef.current) {\n      dataFetchedRef.current = true;\n      fetchTournamentData();\n    }\n\n    // Join tournament room for real-time updates\n    joinTournament(tournamentId);\n\n    // Subscribe to tournament updates\n    const unsubscribe = subscribeTournamentUpdates(data => {\n      if (data.tournamentId === tournamentId) {\n        // Add update to the feed\n        setRealTimeUpdates(prev => [{\n          id: Date.now(),\n          type: data.type,\n          timestamp: new Date(data.timestamp || Date.now()),\n          content: data\n        }, ...prev.slice(0, 19) // Keep only the 20 most recent updates\n        ]);\n\n        // Also update local tournament data if needed\n        if (data.type === 'MATCHES_ADDED') {\n          setTournament(prev => {\n            if (!prev) return prev;\n            return {\n              ...prev,\n              matches: data.matches\n            };\n          });\n        }\n      }\n    });\n\n    // Clean up when unmounting\n    return () => {\n      leaveTournament(tournamentId);\n      unsubscribe();\n    };\n  }, [tournamentId, joinTournament, leaveTournament, subscribeTournamentUpdates]);\n\n  // Function to retry fetching data (useful if tournament data could not be loaded initially)\n  const retryFetchData = useCallback(() => {\n    console.log('Retrying tournament data fetch...');\n    // Clear fetchingRef to allow a new attempt\n    fetchingRef.current = false;\n    // Clear data fetched flag\n    dataFetchedRef.current = false;\n    // Clear any cached data for this tournament\n    try {\n      tournamentService.clearCache(`tournament_${tournamentId}`);\n    } catch (err) {\n      console.error('Error clearing cache:', err);\n    }\n    // Try fetching again\n    fetchTournamentData();\n  }, [tournamentId, fetchTournamentData]);\n\n  // Handle tab change\n  const handleTabChange = tab => {\n    setActiveTab(tab);\n\n    // Update URL without full refresh\n    const params = new URLSearchParams(location.search);\n    params.set('tab', tab);\n    navigate(`${location.pathname}?${params.toString()}`, {\n      replace: true\n    });\n  };\n\n  // Handle calculate standings\n  const handleCalculateStandings = async () => {\n    var _tournament$matches;\n    if (calculatingStandings || ((_tournament$matches = tournament.matches) === null || _tournament$matches === void 0 ? void 0 : _tournament$matches.length) === 0) return;\n    setCalculatingStandings(true);\n    try {\n      const response = await axios.post(`/api/tournaments/${tournamentId}/calculate-standings`, {\n        platform: 'steam' // Default platform\n      });\n\n      // Update tournament with new standings\n      setTournament(prev => ({\n        ...prev,\n        standings: JSON.stringify(response.data.data.standings)\n      }));\n\n      // Add update to feed\n      setRealTimeUpdates(prev => [{\n        id: Date.now(),\n        type: 'STANDINGS_UPDATE',\n        timestamp: new Date(),\n        content: {\n          tournamentId\n        }\n      }, ...prev.slice(0, 19)]);\n    } catch (err) {\n      console.error('Error calculating standings:', err);\n      setError('Failed to calculate standings. Please try again.');\n    } finally {\n      setCalculatingStandings(false);\n    }\n  };\n\n  // Handle export standings\n  const handleExportStandings = () => {\n    if (!tournament.standings) return;\n    try {\n      // Parse standings\n      const standings = JSON.parse(tournament.standings);\n\n      // Create CSV content\n      let csvContent = 'Rank,Team,Points,Kills,Damage,Avg Placement\\n';\n      standings.forEach(team => {\n        csvContent += `${team.rank},${team.teamName},${team.totalPoints},${team.totalKills},${Math.round(team.totalDamage)},${team.averagePlacement.toFixed(1)}\\n`;\n      });\n\n      // Create blob and download\n      const blob = new Blob([csvContent], {\n        type: 'text/csv;charset=utf-8;'\n      });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.setAttribute('href', url);\n      link.setAttribute('download', `${tournament.name.replace(/\\s+/g, '_')}_standings.csv`);\n      link.style.visibility = 'hidden';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    } catch (err) {\n      console.error('Error exporting standings:', err);\n      setError('Failed to export standings');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tournament-details-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"page-title\",\n          children: \"Tournament Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tournament-details-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"page-title\",\n          children: \"Tournament Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-container\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }, this);\n  }\n  if (!tournament) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tournament-details-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"page-title\",\n          children: \"Tournament Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Tournament not found or could not be loaded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary mt-3\",\n            onClick: retryFetchData,\n            children: \"Retry Loading Tournament\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Format dates\n  const formatDate = dateString => {\n    const options = {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    };\n    return new Date(dateString).toLocaleDateString(undefined, options);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"tournament-details-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tournament-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"page-title\",\n          children: tournament.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tournament-meta\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tournament-dates\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"date-label\",\n              children: \"Start:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 15\n            }, this), \" \", formatDate(tournament.start_date), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"date-label\",\n              children: \" End:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this), \" \", formatDate(tournament.end_date)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tournament-format\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"format-label\",\n              children: \"Format:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this), \" \", tournament.format, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"scoring-label\",\n              children: \" Scoring:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this), \" \", tournament.scoring_system]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), tournament.is_active && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"status-active\",\n            children: \"Active\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), tournament.description && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tournament-description\",\n        children: tournament.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tournament-tabs\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-btn ${activeTab === 'overview' ? 'active' : ''}`,\n          onClick: () => handleTabChange('overview'),\n          children: \"Overview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-btn ${activeTab === 'standings' ? 'active' : ''}`,\n          onClick: () => handleTabChange('standings'),\n          children: \"Standings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-btn ${activeTab === 'matches' ? 'active' : ''}`,\n          onClick: () => handleTabChange('matches'),\n          children: \"Matches\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-btn ${activeTab === 'teams' ? 'active' : ''}`,\n          onClick: () => handleTabChange('teams'),\n          children: \"Teams\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-btn ${activeTab === 'updates' ? 'active' : ''}`,\n          onClick: () => handleTabChange('updates'),\n          children: \"Live Updates\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-content\",\n        children: [activeTab === 'overview' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overview-tab\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tournament-overview\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overview-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Tournament Summary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-stats\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"summary-stat\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"stat-label\",\n                    children: \"Teams\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 363,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"stat-value\",\n                    children: ((_tournament$teams = tournament.teams) === null || _tournament$teams === void 0 ? void 0 : _tournament$teams.length) || 0\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 364,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"summary-stat\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"stat-label\",\n                    children: \"Matches\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 367,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"stat-value\",\n                    children: ((_tournament$matches2 = tournament.matches) === null || _tournament$matches2 === void 0 ? void 0 : _tournament$matches2.length) || 0\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 368,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"summary-stat\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"stat-label\",\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"stat-value\",\n                    children: tournament.is_active ? 'Active' : 'Completed'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 372,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"summary-stat\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"stat-label\",\n                    children: \"Visibility\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 375,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"stat-value\",\n                    children: tournament.is_public ? 'Public' : 'Private'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 376,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overview-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Next Match\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 19\n              }, this), tournament.matches && tournament.matches.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"next-match-card\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"match-number\",\n                  children: [\"Match #\", tournament.matches[0].match_number]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"match-id\",\n                  children: tournament.matches[0].match_id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"match-status\",\n                  children: tournament.matches[0].verified ? 'Verified' : 'Pending'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/matches/${tournament.matches[0].match_id}`,\n                  className: \"view-match-btn\",\n                  children: \"View Match\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"no-matches\",\n                children: \"No matches scheduled yet\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 17\n            }, this), tournament.standings && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overview-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Current Standings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"top-teams\",\n                children: JSON.parse(tournament.standings).slice(0, 3).map((team, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `top-team rank-${index + 1}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"team-rank\",\n                    children: [\"#\", team.rank]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 408,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"team-name\",\n                    children: team.teamName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 409,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"team-points\",\n                    children: [team.totalPoints, \" pts\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 410,\n                    columnNumber: 27\n                  }, this)]\n                }, team.teamId, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"#\",\n                onClick: () => handleTabChange('standings'),\n                className: \"view-all-link\",\n                children: \"View full standings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this), activeTab === 'standings' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"standings-tab\",\n          children: [/*#__PURE__*/_jsxDEV(TournamentLeaderboard, {\n            tournamentId: tournamentId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"standings-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"calculate-btn btn-primary\",\n              onClick: handleCalculateStandings,\n              disabled: calculatingStandings || ((_tournament$matches3 = tournament.matches) === null || _tournament$matches3 === void 0 ? void 0 : _tournament$matches3.length) === 0,\n              children: calculatingStandings ? 'Calculating...' : 'Recalculate Standings'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"export-btn btn-secondary\",\n              onClick: handleExportStandings,\n              disabled: !tournament.standings,\n              children: \"Export to CSV\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 13\n        }, this), activeTab === 'matches' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"matches-tab\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"matches-actions\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `/matches/search?tournamentId=${tournamentId}`,\n              className: \"add-matches-btn\",\n              children: \"Add Matches\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 15\n          }, this), tournament.matches && tournament.matches.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"matches-list\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Tournament Matches\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"matches-grid\",\n              children: tournament.matches.sort((a, b) => a.match_number - b.match_number).map(match => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"match-card\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"match-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"match-number\",\n                    children: [\"Match #\", match.match_number]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"match-stage\",\n                    children: match.stage\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"match-body\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"match-id\",\n                    children: [\"ID: \", match.match_id]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 473,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"match-status\",\n                    children: match.verified ? 'Verified' : 'Pending'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 474,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"match-date\",\n                    children: new Date(match.registered_at).toLocaleDateString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 477,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 472,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"match-actions\",\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: `/matches/${match.match_id}`,\n                    className: \"view-match-btn\",\n                    children: \"View Match\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 482,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 481,\n                  columnNumber: 27\n                }, this)]\n              }, match.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-matches\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No matches have been added to this tournament yet.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Use the \\\"Add Matches\\\" button to search for and add custom matches.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 13\n        }, this), activeTab === 'teams' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"teams-tab\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"teams-actions\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"add-team-btn btn-primary\",\n              onClick: () => setIsAddTeamModalOpen(true),\n              children: \"Add Team\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Modal, {\n            isOpen: isAddTeamModalOpen,\n            onClose: () => setIsAddTeamModalOpen(false),\n            children: /*#__PURE__*/_jsxDEV(AddTeamToTournament, {\n              tournamentId: tournamentId,\n              onSuccess: () => {\n                setIsAddTeamModalOpen(false);\n                // Refresh tournament data using service\n                const refreshTournamentData = async () => {\n                  try {\n                    console.log('Refreshing tournament data after adding team');\n                    // Clear cache to ensure fresh data\n                    tournamentService.clearCache(`tournament_${tournamentId}`);\n                    const response = await tournamentService.getTournamentById(tournamentId);\n                    setTournament(response.data.data);\n                    console.log('Tournament data refreshed:', response.data.data);\n                  } catch (err) {\n                    console.error('Error refreshing tournament data:', err);\n                  }\n                };\n                refreshTournamentData();\n\n                // Add update to feed\n                setRealTimeUpdates(prev => [{\n                  id: Date.now(),\n                  type: 'TEAMS_ADDED',\n                  timestamp: new Date(),\n                  content: {\n                    tournamentId\n                  }\n                }, ...prev.slice(0, 19)]);\n              },\n              onCancel: () => setIsAddTeamModalOpen(false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 15\n          }, this), tournament.teams && tournament.teams.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"teams-list\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Participating Teams\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 556,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"teams-grid\",\n              children: tournament.teams.map(team => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"team-card\",\n                children: [team.logo_url && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"team-logo\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: team.logo_url,\n                    alt: `${team.name} logo`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 562,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 561,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"team-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"team-name\",\n                    children: [team.tag && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"team-tag\",\n                      children: [\"[\", team.tag, \"]\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 567,\n                      columnNumber: 42\n                    }, this), team.name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 566,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"team-seed\",\n                    children: [\"Seed: \", team.seed_number || 'Unranked']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 570,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"team-status\",\n                    children: team.is_active ? 'Active' : 'Inactive'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 573,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 565,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"team-actions\",\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: `/teams/${team.id}`,\n                    className: \"view-team-btn\",\n                    children: \"View Team\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 578,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 577,\n                  columnNumber: 25\n                }, this)]\n              }, team.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-teams\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No teams have been added to this tournament yet.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Use the \\\"Add Team\\\" button to register teams for this tournament.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 13\n        }, this), activeTab === 'updates' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"updates-tab\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Live Tournament Updates\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"updates-container\",\n            children: realTimeUpdates.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"updates-list\",\n              children: realTimeUpdates.map(update => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `update-item update-${update.type.toLowerCase()}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"update-time\",\n                  children: update.timestamp.toLocaleTimeString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 607,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"update-content\",\n                  children: formatUpdateContent(update)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 610,\n                  columnNumber: 25\n                }, this)]\n              }, update.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 604,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-updates\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"No live updates yet.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 618,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Updates will appear here in real-time as tournament activity occurs.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 619,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 617,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 296,\n    columnNumber: 5\n  }, this);\n};\n\n// Helper function to format update content\n_s(TournamentDetails, \"UAtyBCvTNw9V2uAnqyZ+63m8JWo=\", false, function () {\n  return [useParams, useLocation, useNavigate, useSocket];\n});\n_c = TournamentDetails;\nconst formatUpdateContent = update => {\n  switch (update.type) {\n    case 'MATCHES_ADDED':\n      return `${update.content.added.length} new match(es) added to the tournament`;\n    case 'STANDINGS_UPDATE':\n      return 'Tournament standings have been updated';\n    case 'MATCH_COMPLETED':\n      return `Match #${update.content.matchNumber || ''} completed`;\n    case 'TEAM_JOINED':\n      return `Team \"${update.content.teamName}\" joined the tournament`;\n    default:\n      return 'Tournament update received';\n  }\n};\nexport default TournamentDetails;\nvar _c;\n$RefreshReg$(_c, \"TournamentDetails\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useParams","Link","useLocation","useNavigate","axios","tournamentService","useSocket","LoadingSpinner","TournamentLeaderboard","Modal","AddTeamToTournament","jsxDEV","_jsxDEV","TournamentDetails","_s","_tournament$teams","_tournament$matches2","_tournament$matches3","id","tournamentId","location","navigate","tournament","setTournament","loading","setLoading","error","setError","activeTab","setActiveTab","calculatingStandings","setCalculatingStandings","isAddTeamModalOpen","setIsAddTeamModalOpen","joinMatch","leaveMatch","subscribeToEvent","emitEvent","realTimeUpdates","setRealTimeUpdates","joinTournament","console","log","leaveTournament","subscribeTournamentUpdates","callback","dataFetchedRef","fetchingRef","fetchTournamentData","current","_response$data","response","getTournamentById","tournamentData","data","name","err","status","warn","setTimeout","unsubscribe","prev","Date","now","type","timestamp","content","slice","matches","retryFetchData","clearCache","handleTabChange","tab","params","URLSearchParams","search","set","pathname","toString","replace","handleCalculateStandings","_tournament$matches","length","post","platform","standings","JSON","stringify","handleExportStandings","parse","csvContent","forEach","team","rank","teamName","totalPoints","totalKills","Math","round","totalDamage","averagePlacement","toFixed","blob","Blob","url","URL","createObjectURL","link","document","createElement","setAttribute","style","visibility","body","appendChild","click","removeChild","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","formatDate","dateString","options","year","month","day","hour","minute","toLocaleDateString","undefined","start_date","end_date","format","scoring_system","is_active","description","teams","is_public","match_number","match_id","verified","to","map","index","teamId","disabled","sort","a","b","match","stage","registered_at","isOpen","onClose","onSuccess","refreshTournamentData","onCancel","logo_url","src","alt","tag","seed_number","update","toLowerCase","toLocaleTimeString","formatUpdateContent","_c","added","matchNumber","$RefreshReg$"],"sources":["C:/Users/emil/OneDrive/Documents/development/apiDevelopment/pubg-tournament-tracker/client/src/pages/tournaments/TournamentDetails.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useParams, Link, useLocation, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport tournamentService from '../../services/tournamentService';\nimport { useSocket } from '../../contexts/SocketContext';\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\nimport TournamentLeaderboard from '../../components/tournaments/TournamentLeaderboard';\nimport Modal from '../../components/common/Modal';\nimport AddTeamToTournament from '../../components/common/AddTeamToTournament';\n\nconst TournamentDetails = () => {\n  const { id: tournamentId } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [tournament, setTournament] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeTab, setActiveTab] = useState('overview');\n  const [calculatingStandings, setCalculatingStandings] = useState(false);\n  const [isAddTeamModalOpen, setIsAddTeamModalOpen] = useState(false);\n  const { joinMatch, leaveMatch, subscribeToEvent, emitEvent } = useSocket();\n  const [realTimeUpdates, setRealTimeUpdates] = useState([]);\n  \n  // Create wrapper functions for joinMatch and leaveMatch using useCallback to prevent rerenders\n  const joinTournament = useCallback((tournamentId) => {\n    console.log('Joining tournament room:', tournamentId);\n    if (joinMatch) {\n      joinMatch(`tournament:${tournamentId}`);\n    }\n  }, [joinMatch]);\n  \n  const leaveTournament = useCallback((tournamentId) => {\n    console.log('Leaving tournament room:', tournamentId);\n    if (leaveMatch) {\n      leaveMatch(`tournament:${tournamentId}`);\n    }\n  }, [leaveMatch]);\n  \n  // Create wrapper for subscribeTournamentUpdates\n  const subscribeTournamentUpdates = useCallback((callback) => {\n    console.log('Setting up tournament updates subscription');\n    return subscribeToEvent('tournament-update', callback);\n  }, [subscribeToEvent]);\n  \n  // Use ref to track if we've already fetched the data to prevent duplicate requests\n  const dataFetchedRef = useRef(false);\n  \n  // Use a ref to track if we're already fetching data to prevent duplicate requests\n  const fetchingRef = useRef(false);\n  \n  // Use a debounced fetch function to prevent rapid consecutive calls\n  const fetchTournamentData = useCallback(async () => {\n    // Return early if already fetching or lacking a tournament ID\n    if (fetchingRef.current || !tournamentId) {\n      console.log('Skipping redundant fetch, already in progress or missing ID');\n      return;\n    }\n    \n    try {\n      // Mark that we're fetching to prevent duplicate requests\n      fetchingRef.current = true;\n      setLoading(true);\n      \n      console.log(`Fetching tournament data for ID: ${tournamentId}`);\n      const response = await tournamentService.getTournamentById(tournamentId);\n      // Log the entire response for debugging\n      console.log(`Raw response:`, response);\n      \n      // Check for different response structures and handle accordingly\n      let tournamentData = null;\n      \n      // Case 1: Standard format - response.data.data\n      if (response?.data?.data) {\n        tournamentData = response.data.data;\n      }\n      // Case 2: Simplified format - response.data\n      else if (response?.data && !response.data.data) {\n        tournamentData = response.data;\n      }\n      // Case 3: Direct data format\n      else if (response && !response.data) {\n        tournamentData = response;\n      }\n      \n      if (tournamentData) {\n        console.log('Tournament data successfully loaded:', tournamentData.name || 'unnamed');\n        setTournament(tournamentData);\n        setError(null);\n      } else {\n        console.error('Could not extract tournament data from response. Format not recognized:', response);\n        setError('Failed to load tournament data - response format not recognized');\n      }\n    } catch (err) {\n      console.error('Error fetching tournament data:', err);\n      setError('Failed to load tournament data');\n      \n      // If we get a 429 error, don't try again immediately\n      if (err.response && err.response.status === 429) {\n        console.warn('Rate limit exceeded. Waiting before retrying...');\n      }\n    } finally {\n      setLoading(false);\n      // Reset fetching flag after a small delay to prevent immediate re-fetch\n      setTimeout(() => {\n        fetchingRef.current = false;\n      }, 500);\n    }\n  }, [tournamentId]);\n  \n  useEffect(() => {\n    // Fetch tournament data once when component mounts\n    if (!dataFetchedRef.current) {\n      dataFetchedRef.current = true;\n      fetchTournamentData();\n    }\n    \n    // Join tournament room for real-time updates\n    joinTournament(tournamentId);\n    \n    // Subscribe to tournament updates\n    const unsubscribe = subscribeTournamentUpdates((data) => {\n      if (data.tournamentId === tournamentId) {\n        // Add update to the feed\n        setRealTimeUpdates(prev => [\n          {\n            id: Date.now(),\n            type: data.type,\n            timestamp: new Date(data.timestamp || Date.now()),\n            content: data\n          },\n          ...prev.slice(0, 19) // Keep only the 20 most recent updates\n        ]);\n        \n        // Also update local tournament data if needed\n        if (data.type === 'MATCHES_ADDED') {\n          setTournament(prev => {\n            if (!prev) return prev;\n            return {\n              ...prev,\n              matches: data.matches\n            };\n          });\n        }\n      }\n    });\n    \n    // Clean up when unmounting\n    return () => {\n      leaveTournament(tournamentId);\n      unsubscribe();\n    };\n  }, [tournamentId, joinTournament, leaveTournament, subscribeTournamentUpdates]);\n  \n  // Function to retry fetching data (useful if tournament data could not be loaded initially)\n  const retryFetchData = useCallback(() => {\n    console.log('Retrying tournament data fetch...');\n    // Clear fetchingRef to allow a new attempt\n    fetchingRef.current = false;\n    // Clear data fetched flag\n    dataFetchedRef.current = false;\n    // Clear any cached data for this tournament\n    try {\n      tournamentService.clearCache(`tournament_${tournamentId}`);\n    } catch (err) {\n      console.error('Error clearing cache:', err);\n    }\n    // Try fetching again\n    fetchTournamentData();\n  }, [tournamentId, fetchTournamentData]);\n  \n  // Handle tab change\n  const handleTabChange = (tab) => {\n    setActiveTab(tab);\n    \n    // Update URL without full refresh\n    const params = new URLSearchParams(location.search);\n    params.set('tab', tab);\n    navigate(`${location.pathname}?${params.toString()}`, { replace: true });\n  };\n  \n  // Handle calculate standings\n  const handleCalculateStandings = async () => {\n    if (calculatingStandings || tournament.matches?.length === 0) return;\n    \n    setCalculatingStandings(true);\n    \n    try {\n      const response = await axios.post(`/api/tournaments/${tournamentId}/calculate-standings`, {\n        platform: 'steam' // Default platform\n      });\n      \n      // Update tournament with new standings\n      setTournament(prev => ({\n        ...prev,\n        standings: JSON.stringify(response.data.data.standings)\n      }));\n      \n      // Add update to feed\n      setRealTimeUpdates(prev => [\n        {\n          id: Date.now(),\n          type: 'STANDINGS_UPDATE',\n          timestamp: new Date(),\n          content: { tournamentId }\n        },\n        ...prev.slice(0, 19)\n      ]);\n      \n    } catch (err) {\n      console.error('Error calculating standings:', err);\n      setError('Failed to calculate standings. Please try again.');\n    } finally {\n      setCalculatingStandings(false);\n    }\n  };\n  \n  // Handle export standings\n  const handleExportStandings = () => {\n    if (!tournament.standings) return;\n    \n    try {\n      // Parse standings\n      const standings = JSON.parse(tournament.standings);\n      \n      // Create CSV content\n      let csvContent = 'Rank,Team,Points,Kills,Damage,Avg Placement\\n';\n      \n      standings.forEach(team => {\n        csvContent += `${team.rank},${team.teamName},${team.totalPoints},${team.totalKills},${Math.round(team.totalDamage)},${team.averagePlacement.toFixed(1)}\\n`;\n      });\n      \n      // Create blob and download\n      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.setAttribute('href', url);\n      link.setAttribute('download', `${tournament.name.replace(/\\s+/g, '_')}_standings.csv`);\n      link.style.visibility = 'hidden';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    } catch (err) {\n      console.error('Error exporting standings:', err);\n      setError('Failed to export standings');\n    }\n  };\n  \n  if (loading) {\n    return (\n      <div className=\"tournament-details-page\">\n        <div className=\"container\">\n          <h1 className=\"page-title\">Tournament Details</h1>\n          <LoadingSpinner />\n        </div>\n      </div>\n    );\n  }\n  \n  if (error) {\n    return (\n      <div className=\"tournament-details-page\">\n        <div className=\"container\">\n          <h1 className=\"page-title\">Tournament Details</h1>\n          <div className=\"error-container\">{error}</div>\n        </div>\n      </div>\n    );\n  }\n  \n  if (!tournament) {\n    return (\n      <div className=\"tournament-details-page\">\n        <div className=\"container\">\n          <h1 className=\"page-title\">Tournament Details</h1>\n          <div className=\"error-container\">\n            <p>Tournament not found or could not be loaded</p>\n            <button \n              className=\"btn btn-primary mt-3\"\n              onClick={retryFetchData}\n            >\n              Retry Loading Tournament\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  \n  // Format dates\n  const formatDate = (dateString) => {\n    const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };\n    return new Date(dateString).toLocaleDateString(undefined, options);\n  };\n  \n  return (\n    <div className=\"tournament-details-page\">\n      <div className=\"container\">\n        <div className=\"tournament-header\">\n          <h1 className=\"page-title\">{tournament.name}</h1>\n          <div className=\"tournament-meta\">\n            <div className=\"tournament-dates\">\n              <span className=\"date-label\">Start:</span> {formatDate(tournament.start_date)}\n              <span className=\"date-label\"> End:</span> {formatDate(tournament.end_date)}\n            </div>\n            <div className=\"tournament-format\">\n              <span className=\"format-label\">Format:</span> {tournament.format}\n              <span className=\"scoring-label\"> Scoring:</span> {tournament.scoring_system}\n            </div>\n            {tournament.is_active && <div className=\"status-active\">Active</div>}\n          </div>\n        </div>\n        \n        {tournament.description && (\n          <div className=\"tournament-description\">\n            {tournament.description}\n          </div>\n        )}\n        \n        {/* Tabs for different views */}\n        <div className=\"tournament-tabs\">\n          <button \n            className={`tab-btn ${activeTab === 'overview' ? 'active' : ''}`}\n            onClick={() => handleTabChange('overview')}\n          >\n            Overview\n          </button>\n          <button \n            className={`tab-btn ${activeTab === 'standings' ? 'active' : ''}`}\n            onClick={() => handleTabChange('standings')}\n          >\n            Standings\n          </button>\n          <button \n            className={`tab-btn ${activeTab === 'matches' ? 'active' : ''}`}\n            onClick={() => handleTabChange('matches')}\n          >\n            Matches\n          </button>\n          <button \n            className={`tab-btn ${activeTab === 'teams' ? 'active' : ''}`}\n            onClick={() => handleTabChange('teams')}\n          >\n            Teams\n          </button>\n          <button \n            className={`tab-btn ${activeTab === 'updates' ? 'active' : ''}`}\n            onClick={() => handleTabChange('updates')}\n          >\n            Live Updates\n          </button>\n        </div>\n        \n        {/* Tab content */}\n        <div className=\"tab-content\">\n          {/* Overview tab */}\n          {activeTab === 'overview' && (\n            <div className=\"overview-tab\">\n              <div className=\"tournament-overview\">\n                <div className=\"overview-section\">\n                  <h2>Tournament Summary</h2>\n                  <div className=\"summary-stats\">\n                    <div className=\"summary-stat\">\n                      <div className=\"stat-label\">Teams</div>\n                      <div className=\"stat-value\">{tournament.teams?.length || 0}</div>\n                    </div>\n                    <div className=\"summary-stat\">\n                      <div className=\"stat-label\">Matches</div>\n                      <div className=\"stat-value\">{tournament.matches?.length || 0}</div>\n                    </div>\n                    <div className=\"summary-stat\">\n                      <div className=\"stat-label\">Status</div>\n                      <div className=\"stat-value\">{tournament.is_active ? 'Active' : 'Completed'}</div>\n                    </div>\n                    <div className=\"summary-stat\">\n                      <div className=\"stat-label\">Visibility</div>\n                      <div className=\"stat-value\">{tournament.is_public ? 'Public' : 'Private'}</div>\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"overview-section\">\n                  <h2>Next Match</h2>\n                  {tournament.matches && tournament.matches.length > 0 ? (\n                    <div className=\"next-match-card\">\n                      <div className=\"match-number\">Match #{tournament.matches[0].match_number}</div>\n                      <div className=\"match-id\">{tournament.matches[0].match_id}</div>\n                      <div className=\"match-status\">\n                        {tournament.matches[0].verified ? 'Verified' : 'Pending'}\n                      </div>\n                      <Link \n                        to={`/matches/${tournament.matches[0].match_id}`}\n                        className=\"view-match-btn\"\n                      >\n                        View Match\n                      </Link>\n                    </div>\n                  ) : (\n                    <div className=\"no-matches\">No matches scheduled yet</div>\n                  )}\n                </div>\n                \n                {tournament.standings && (\n                  <div className=\"overview-section\">\n                    <h2>Current Standings</h2>\n                    <div className=\"top-teams\">\n                      {JSON.parse(tournament.standings).slice(0, 3).map((team, index) => (\n                        <div key={team.teamId} className={`top-team rank-${index + 1}`}>\n                          <div className=\"team-rank\">#{team.rank}</div>\n                          <div className=\"team-name\">{team.teamName}</div>\n                          <div className=\"team-points\">{team.totalPoints} pts</div>\n                        </div>\n                      ))}\n                    </div>\n                    <Link \n                      to=\"#\" \n                      onClick={() => handleTabChange('standings')}\n                      className=\"view-all-link\"\n                    >\n                      View full standings\n                    </Link>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n          \n          {/* Standings tab */}\n          {activeTab === 'standings' && (\n            <div className=\"standings-tab\">\n              <TournamentLeaderboard tournamentId={tournamentId} />\n              \n              <div className=\"standings-actions\">\n                <button \n                  className=\"calculate-btn btn-primary\"\n                  onClick={handleCalculateStandings}\n                  disabled={calculatingStandings || tournament.matches?.length === 0}\n                >\n                  {calculatingStandings ? 'Calculating...' : 'Recalculate Standings'}\n                </button>\n                <button \n                  className=\"export-btn btn-secondary\"\n                  onClick={handleExportStandings}\n                  disabled={!tournament.standings}\n                >\n                  Export to CSV\n                </button>\n              </div>\n            </div>\n          )}\n          \n          {/* Matches tab */}\n          {activeTab === 'matches' && (\n            <div className=\"matches-tab\">\n              <div className=\"matches-actions\">\n                <Link to={`/matches/search?tournamentId=${tournamentId}`} className=\"add-matches-btn\">\n                  Add Matches\n                </Link>\n              </div>\n              \n              {tournament.matches && tournament.matches.length > 0 ? (\n                <div className=\"matches-list\">\n                  <h2>Tournament Matches</h2>\n                  <div className=\"matches-grid\">\n                    {tournament.matches\n                      .sort((a, b) => a.match_number - b.match_number)\n                      .map(match => (\n                        <div key={match.id} className=\"match-card\">\n                          <div className=\"match-header\">\n                            <div className=\"match-number\">Match #{match.match_number}</div>\n                            <div className=\"match-stage\">{match.stage}</div>\n                          </div>\n                          <div className=\"match-body\">\n                            <div className=\"match-id\">ID: {match.match_id}</div>\n                            <div className=\"match-status\">\n                              {match.verified ? 'Verified' : 'Pending'}\n                            </div>\n                            <div className=\"match-date\">\n                              {new Date(match.registered_at).toLocaleDateString()}\n                            </div>\n                          </div>\n                          <div className=\"match-actions\">\n                            <Link \n                              to={`/matches/${match.match_id}`}\n                              className=\"view-match-btn\"\n                            >\n                              View Match\n                            </Link>\n                          </div>\n                        </div>\n                      ))\n                    }\n                  </div>\n                </div>\n              ) : (\n                <div className=\"no-matches\">\n                  <p>No matches have been added to this tournament yet.</p>\n                  <p>Use the \"Add Matches\" button to search for and add custom matches.</p>\n                </div>\n              )}\n            </div>\n          )}\n          \n          {/* Teams tab */}\n          {activeTab === 'teams' && (\n            <div className=\"teams-tab\">\n              <div className=\"teams-actions\">\n                <button \n                  className=\"add-team-btn btn-primary\"\n                  onClick={() => setIsAddTeamModalOpen(true)}\n                >\n                  Add Team\n                </button>\n              </div>\n              \n              {/* Add Team Modal */}\n              <Modal \n                isOpen={isAddTeamModalOpen} \n                onClose={() => setIsAddTeamModalOpen(false)}\n              >\n                <AddTeamToTournament \n                  tournamentId={tournamentId}\n                  onSuccess={() => {\n                    setIsAddTeamModalOpen(false);\n                    // Refresh tournament data using service\n                    const refreshTournamentData = async () => {\n                      try {\n                        console.log('Refreshing tournament data after adding team');\n                        // Clear cache to ensure fresh data\n                        tournamentService.clearCache(`tournament_${tournamentId}`);\n                        const response = await tournamentService.getTournamentById(tournamentId);\n                        setTournament(response.data.data);\n                        console.log('Tournament data refreshed:', response.data.data);\n                      } catch (err) {\n                        console.error('Error refreshing tournament data:', err);\n                      }\n                    };\n                    refreshTournamentData();\n                    \n                    // Add update to feed\n                    setRealTimeUpdates(prev => [\n                      {\n                        id: Date.now(),\n                        type: 'TEAMS_ADDED',\n                        timestamp: new Date(),\n                        content: { tournamentId }\n                      },\n                      ...prev.slice(0, 19)\n                    ]);\n                  }}\n                  onCancel={() => setIsAddTeamModalOpen(false)}\n                />\n              </Modal>\n              \n              {tournament.teams && tournament.teams.length > 0 ? (\n                <div className=\"teams-list\">\n                  <h2>Participating Teams</h2>\n                  <div className=\"teams-grid\">\n                    {tournament.teams.map(team => (\n                      <div key={team.id} className=\"team-card\">\n                        {team.logo_url && (\n                          <div className=\"team-logo\">\n                            <img src={team.logo_url} alt={`${team.name} logo`} />\n                          </div>\n                        )}\n                        <div className=\"team-info\">\n                          <div className=\"team-name\">\n                            {team.tag && <span className=\"team-tag\">[{team.tag}]</span>}\n                            {team.name}\n                          </div>\n                          <div className=\"team-seed\">\n                            Seed: {team.seed_number || 'Unranked'}\n                          </div>\n                          <div className=\"team-status\">\n                            {team.is_active ? 'Active' : 'Inactive'}\n                          </div>\n                        </div>\n                        <div className=\"team-actions\">\n                          <Link \n                            to={`/teams/${team.id}`}\n                            className=\"view-team-btn\"\n                          >\n                            View Team\n                          </Link>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"no-teams\">\n                  <p>No teams have been added to this tournament yet.</p>\n                  <p>Use the \"Add Team\" button to register teams for this tournament.</p>\n                </div>\n              )}\n            </div>\n          )}\n          \n          {/* Live Updates tab */}\n          {activeTab === 'updates' && (\n            <div className=\"updates-tab\">\n              <h2>Live Tournament Updates</h2>\n              <div className=\"updates-container\">\n                {realTimeUpdates.length > 0 ? (\n                  <div className=\"updates-list\">\n                    {realTimeUpdates.map(update => (\n                      <div key={update.id} className={`update-item update-${update.type.toLowerCase()}`}>\n                        <div className=\"update-time\">\n                          {update.timestamp.toLocaleTimeString()}\n                        </div>\n                        <div className=\"update-content\">\n                          {formatUpdateContent(update)}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"no-updates\">\n                    <p>No live updates yet.</p>\n                    <p>Updates will appear here in real-time as tournament activity occurs.</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Helper function to format update content\nconst formatUpdateContent = (update) => {\n  switch (update.type) {\n    case 'MATCHES_ADDED':\n      return `${update.content.added.length} new match(es) added to the tournament`;\n    case 'STANDINGS_UPDATE':\n      return 'Tournament standings have been updated';\n    case 'MATCH_COMPLETED':\n      return `Match #${update.content.matchNumber || ''} completed`;\n    case 'TEAM_JOINED':\n      return `Team \"${update.content.teamName}\" joined the tournament`;\n    default:\n      return 'Tournament update received';\n  }\n};\n\nexport default TournamentDetails;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,MAAM,QAAQ,OAAO;AACvE,SAASC,SAAS,EAAEC,IAAI,EAAEC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC5E,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,iBAAiB,MAAM,kCAAkC;AAChE,SAASC,SAAS,QAAQ,8BAA8B;AACxD,OAAOC,cAAc,MAAM,wCAAwC;AACnE,OAAOC,qBAAqB,MAAM,oDAAoD;AACtF,OAAOC,KAAK,MAAM,+BAA+B;AACjD,OAAOC,mBAAmB,MAAM,6CAA6C;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9E,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,iBAAA,EAAAC,oBAAA,EAAAC,oBAAA;EAC9B,MAAM;IAAEC,EAAE,EAAEC;EAAa,CAAC,GAAGnB,SAAS,CAAC,CAAC;EACxC,MAAMoB,QAAQ,GAAGlB,WAAW,CAAC,CAAC;EAC9B,MAAMmB,QAAQ,GAAGlB,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACmB,UAAU,EAAEC,aAAa,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAAC4B,OAAO,EAAEC,UAAU,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC8B,KAAK,EAAEC,QAAQ,CAAC,GAAG/B,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACgC,SAAS,EAAEC,YAAY,CAAC,GAAGjC,QAAQ,CAAC,UAAU,CAAC;EACtD,MAAM,CAACkC,oBAAoB,EAAEC,uBAAuB,CAAC,GAAGnC,QAAQ,CAAC,KAAK,CAAC;EACvE,MAAM,CAACoC,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGrC,QAAQ,CAAC,KAAK,CAAC;EACnE,MAAM;IAAEsC,SAAS;IAAEC,UAAU;IAAEC,gBAAgB;IAAEC;EAAU,CAAC,GAAG/B,SAAS,CAAC,CAAC;EAC1E,MAAM,CAACgC,eAAe,EAAEC,kBAAkB,CAAC,GAAG3C,QAAQ,CAAC,EAAE,CAAC;;EAE1D;EACA,MAAM4C,cAAc,GAAG1C,WAAW,CAAEqB,YAAY,IAAK;IACnDsB,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEvB,YAAY,CAAC;IACrD,IAAIe,SAAS,EAAE;MACbA,SAAS,CAAC,cAAcf,YAAY,EAAE,CAAC;IACzC;EACF,CAAC,EAAE,CAACe,SAAS,CAAC,CAAC;EAEf,MAAMS,eAAe,GAAG7C,WAAW,CAAEqB,YAAY,IAAK;IACpDsB,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEvB,YAAY,CAAC;IACrD,IAAIgB,UAAU,EAAE;MACdA,UAAU,CAAC,cAAchB,YAAY,EAAE,CAAC;IAC1C;EACF,CAAC,EAAE,CAACgB,UAAU,CAAC,CAAC;;EAEhB;EACA,MAAMS,0BAA0B,GAAG9C,WAAW,CAAE+C,QAAQ,IAAK;IAC3DJ,OAAO,CAACC,GAAG,CAAC,4CAA4C,CAAC;IACzD,OAAON,gBAAgB,CAAC,mBAAmB,EAAES,QAAQ,CAAC;EACxD,CAAC,EAAE,CAACT,gBAAgB,CAAC,CAAC;;EAEtB;EACA,MAAMU,cAAc,GAAG/C,MAAM,CAAC,KAAK,CAAC;;EAEpC;EACA,MAAMgD,WAAW,GAAGhD,MAAM,CAAC,KAAK,CAAC;;EAEjC;EACA,MAAMiD,mBAAmB,GAAGlD,WAAW,CAAC,YAAY;IAClD;IACA,IAAIiD,WAAW,CAACE,OAAO,IAAI,CAAC9B,YAAY,EAAE;MACxCsB,OAAO,CAACC,GAAG,CAAC,6DAA6D,CAAC;MAC1E;IACF;IAEA,IAAI;MAAA,IAAAQ,cAAA;MACF;MACAH,WAAW,CAACE,OAAO,GAAG,IAAI;MAC1BxB,UAAU,CAAC,IAAI,CAAC;MAEhBgB,OAAO,CAACC,GAAG,CAAC,oCAAoCvB,YAAY,EAAE,CAAC;MAC/D,MAAMgC,QAAQ,GAAG,MAAM9C,iBAAiB,CAAC+C,iBAAiB,CAACjC,YAAY,CAAC;MACxE;MACAsB,OAAO,CAACC,GAAG,CAAC,eAAe,EAAES,QAAQ,CAAC;;MAEtC;MACA,IAAIE,cAAc,GAAG,IAAI;;MAEzB;MACA,IAAIF,QAAQ,aAARA,QAAQ,gBAAAD,cAAA,GAARC,QAAQ,CAAEG,IAAI,cAAAJ,cAAA,eAAdA,cAAA,CAAgBI,IAAI,EAAE;QACxBD,cAAc,GAAGF,QAAQ,CAACG,IAAI,CAACA,IAAI;MACrC;MACA;MAAA,KACK,IAAIH,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEG,IAAI,IAAI,CAACH,QAAQ,CAACG,IAAI,CAACA,IAAI,EAAE;QAC9CD,cAAc,GAAGF,QAAQ,CAACG,IAAI;MAChC;MACA;MAAA,KACK,IAAIH,QAAQ,IAAI,CAACA,QAAQ,CAACG,IAAI,EAAE;QACnCD,cAAc,GAAGF,QAAQ;MAC3B;MAEA,IAAIE,cAAc,EAAE;QAClBZ,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAEW,cAAc,CAACE,IAAI,IAAI,SAAS,CAAC;QACrFhC,aAAa,CAAC8B,cAAc,CAAC;QAC7B1B,QAAQ,CAAC,IAAI,CAAC;MAChB,CAAC,MAAM;QACLc,OAAO,CAACf,KAAK,CAAC,yEAAyE,EAAEyB,QAAQ,CAAC;QAClGxB,QAAQ,CAAC,iEAAiE,CAAC;MAC7E;IACF,CAAC,CAAC,OAAO6B,GAAG,EAAE;MACZf,OAAO,CAACf,KAAK,CAAC,iCAAiC,EAAE8B,GAAG,CAAC;MACrD7B,QAAQ,CAAC,gCAAgC,CAAC;;MAE1C;MACA,IAAI6B,GAAG,CAACL,QAAQ,IAAIK,GAAG,CAACL,QAAQ,CAACM,MAAM,KAAK,GAAG,EAAE;QAC/ChB,OAAO,CAACiB,IAAI,CAAC,iDAAiD,CAAC;MACjE;IACF,CAAC,SAAS;MACRjC,UAAU,CAAC,KAAK,CAAC;MACjB;MACAkC,UAAU,CAAC,MAAM;QACfZ,WAAW,CAACE,OAAO,GAAG,KAAK;MAC7B,CAAC,EAAE,GAAG,CAAC;IACT;EACF,CAAC,EAAE,CAAC9B,YAAY,CAAC,CAAC;EAElBtB,SAAS,CAAC,MAAM;IACd;IACA,IAAI,CAACiD,cAAc,CAACG,OAAO,EAAE;MAC3BH,cAAc,CAACG,OAAO,GAAG,IAAI;MAC7BD,mBAAmB,CAAC,CAAC;IACvB;;IAEA;IACAR,cAAc,CAACrB,YAAY,CAAC;;IAE5B;IACA,MAAMyC,WAAW,GAAGhB,0BAA0B,CAAEU,IAAI,IAAK;MACvD,IAAIA,IAAI,CAACnC,YAAY,KAAKA,YAAY,EAAE;QACtC;QACAoB,kBAAkB,CAACsB,IAAI,IAAI,CACzB;UACE3C,EAAE,EAAE4C,IAAI,CAACC,GAAG,CAAC,CAAC;UACdC,IAAI,EAAEV,IAAI,CAACU,IAAI;UACfC,SAAS,EAAE,IAAIH,IAAI,CAACR,IAAI,CAACW,SAAS,IAAIH,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;UACjDG,OAAO,EAAEZ;QACX,CAAC,EACD,GAAGO,IAAI,CAACM,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAAA,CACtB,CAAC;;QAEF;QACA,IAAIb,IAAI,CAACU,IAAI,KAAK,eAAe,EAAE;UACjCzC,aAAa,CAACsC,IAAI,IAAI;YACpB,IAAI,CAACA,IAAI,EAAE,OAAOA,IAAI;YACtB,OAAO;cACL,GAAGA,IAAI;cACPO,OAAO,EAAEd,IAAI,CAACc;YAChB,CAAC;UACH,CAAC,CAAC;QACJ;MACF;IACF,CAAC,CAAC;;IAEF;IACA,OAAO,MAAM;MACXzB,eAAe,CAACxB,YAAY,CAAC;MAC7ByC,WAAW,CAAC,CAAC;IACf,CAAC;EACH,CAAC,EAAE,CAACzC,YAAY,EAAEqB,cAAc,EAAEG,eAAe,EAAEC,0BAA0B,CAAC,CAAC;;EAE/E;EACA,MAAMyB,cAAc,GAAGvE,WAAW,CAAC,MAAM;IACvC2C,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;IAChD;IACAK,WAAW,CAACE,OAAO,GAAG,KAAK;IAC3B;IACAH,cAAc,CAACG,OAAO,GAAG,KAAK;IAC9B;IACA,IAAI;MACF5C,iBAAiB,CAACiE,UAAU,CAAC,cAAcnD,YAAY,EAAE,CAAC;IAC5D,CAAC,CAAC,OAAOqC,GAAG,EAAE;MACZf,OAAO,CAACf,KAAK,CAAC,uBAAuB,EAAE8B,GAAG,CAAC;IAC7C;IACA;IACAR,mBAAmB,CAAC,CAAC;EACvB,CAAC,EAAE,CAAC7B,YAAY,EAAE6B,mBAAmB,CAAC,CAAC;;EAEvC;EACA,MAAMuB,eAAe,GAAIC,GAAG,IAAK;IAC/B3C,YAAY,CAAC2C,GAAG,CAAC;;IAEjB;IACA,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAACtD,QAAQ,CAACuD,MAAM,CAAC;IACnDF,MAAM,CAACG,GAAG,CAAC,KAAK,EAAEJ,GAAG,CAAC;IACtBnD,QAAQ,CAAC,GAAGD,QAAQ,CAACyD,QAAQ,IAAIJ,MAAM,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;EAC1E,CAAC;;EAED;EACA,MAAMC,wBAAwB,GAAG,MAAAA,CAAA,KAAY;IAAA,IAAAC,mBAAA;IAC3C,IAAInD,oBAAoB,IAAI,EAAAmD,mBAAA,GAAA3D,UAAU,CAAC8C,OAAO,cAAAa,mBAAA,uBAAlBA,mBAAA,CAAoBC,MAAM,MAAK,CAAC,EAAE;IAE9DnD,uBAAuB,CAAC,IAAI,CAAC;IAE7B,IAAI;MACF,MAAMoB,QAAQ,GAAG,MAAM/C,KAAK,CAAC+E,IAAI,CAAC,oBAAoBhE,YAAY,sBAAsB,EAAE;QACxFiE,QAAQ,EAAE,OAAO,CAAC;MACpB,CAAC,CAAC;;MAEF;MACA7D,aAAa,CAACsC,IAAI,KAAK;QACrB,GAAGA,IAAI;QACPwB,SAAS,EAAEC,IAAI,CAACC,SAAS,CAACpC,QAAQ,CAACG,IAAI,CAACA,IAAI,CAAC+B,SAAS;MACxD,CAAC,CAAC,CAAC;;MAEH;MACA9C,kBAAkB,CAACsB,IAAI,IAAI,CACzB;QACE3C,EAAE,EAAE4C,IAAI,CAACC,GAAG,CAAC,CAAC;QACdC,IAAI,EAAE,kBAAkB;QACxBC,SAAS,EAAE,IAAIH,IAAI,CAAC,CAAC;QACrBI,OAAO,EAAE;UAAE/C;QAAa;MAC1B,CAAC,EACD,GAAG0C,IAAI,CAACM,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CACrB,CAAC;IAEJ,CAAC,CAAC,OAAOX,GAAG,EAAE;MACZf,OAAO,CAACf,KAAK,CAAC,8BAA8B,EAAE8B,GAAG,CAAC;MAClD7B,QAAQ,CAAC,kDAAkD,CAAC;IAC9D,CAAC,SAAS;MACRI,uBAAuB,CAAC,KAAK,CAAC;IAChC;EACF,CAAC;;EAED;EACA,MAAMyD,qBAAqB,GAAGA,CAAA,KAAM;IAClC,IAAI,CAAClE,UAAU,CAAC+D,SAAS,EAAE;IAE3B,IAAI;MACF;MACA,MAAMA,SAAS,GAAGC,IAAI,CAACG,KAAK,CAACnE,UAAU,CAAC+D,SAAS,CAAC;;MAElD;MACA,IAAIK,UAAU,GAAG,+CAA+C;MAEhEL,SAAS,CAACM,OAAO,CAACC,IAAI,IAAI;QACxBF,UAAU,IAAI,GAAGE,IAAI,CAACC,IAAI,IAAID,IAAI,CAACE,QAAQ,IAAIF,IAAI,CAACG,WAAW,IAAIH,IAAI,CAACI,UAAU,IAAIC,IAAI,CAACC,KAAK,CAACN,IAAI,CAACO,WAAW,CAAC,IAAIP,IAAI,CAACQ,gBAAgB,CAACC,OAAO,CAAC,CAAC,CAAC,IAAI;MAC5J,CAAC,CAAC;;MAEF;MACA,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACb,UAAU,CAAC,EAAE;QAAE1B,IAAI,EAAE;MAA0B,CAAC,CAAC;MACxE,MAAMwC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC;MACrC,MAAMK,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;MACxCF,IAAI,CAACG,YAAY,CAAC,MAAM,EAAEN,GAAG,CAAC;MAC9BG,IAAI,CAACG,YAAY,CAAC,UAAU,EAAE,GAAGxF,UAAU,CAACiC,IAAI,CAACwB,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,gBAAgB,CAAC;MACtF4B,IAAI,CAACI,KAAK,CAACC,UAAU,GAAG,QAAQ;MAChCJ,QAAQ,CAACK,IAAI,CAACC,WAAW,CAACP,IAAI,CAAC;MAC/BA,IAAI,CAACQ,KAAK,CAAC,CAAC;MACZP,QAAQ,CAACK,IAAI,CAACG,WAAW,CAACT,IAAI,CAAC;IACjC,CAAC,CAAC,OAAOnD,GAAG,EAAE;MACZf,OAAO,CAACf,KAAK,CAAC,4BAA4B,EAAE8B,GAAG,CAAC;MAChD7B,QAAQ,CAAC,4BAA4B,CAAC;IACxC;EACF,CAAC;EAED,IAAIH,OAAO,EAAE;IACX,oBACEZ,OAAA;MAAKyG,SAAS,EAAC,yBAAyB;MAAAC,QAAA,eACtC1G,OAAA;QAAKyG,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxB1G,OAAA;UAAIyG,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAAkB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAClD9G,OAAA,CAACL,cAAc;UAAAgH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACf;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,IAAIhG,KAAK,EAAE;IACT,oBACEd,OAAA;MAAKyG,SAAS,EAAC,yBAAyB;MAAAC,QAAA,eACtC1G,OAAA;QAAKyG,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxB1G,OAAA;UAAIyG,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAAkB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAClD9G,OAAA;UAAKyG,SAAS,EAAC,iBAAiB;UAAAC,QAAA,EAAE5F;QAAK;UAAA6F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3C;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,IAAI,CAACpG,UAAU,EAAE;IACf,oBACEV,OAAA;MAAKyG,SAAS,EAAC,yBAAyB;MAAAC,QAAA,eACtC1G,OAAA;QAAKyG,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxB1G,OAAA;UAAIyG,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAAkB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAClD9G,OAAA;UAAKyG,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC9B1G,OAAA;YAAA0G,QAAA,EAAG;UAA2C;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAClD9G,OAAA;YACEyG,SAAS,EAAC,sBAAsB;YAChCM,OAAO,EAAEtD,cAAe;YAAAiD,QAAA,EACzB;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;;EAEA;EACA,MAAME,UAAU,GAAIC,UAAU,IAAK;IACjC,MAAMC,OAAO,GAAG;MAAEC,IAAI,EAAE,SAAS;MAAEC,KAAK,EAAE,MAAM;MAAEC,GAAG,EAAE,SAAS;MAAEC,IAAI,EAAE,SAAS;MAAEC,MAAM,EAAE;IAAU,CAAC;IACtG,OAAO,IAAIrE,IAAI,CAAC+D,UAAU,CAAC,CAACO,kBAAkB,CAACC,SAAS,EAAEP,OAAO,CAAC;EACpE,CAAC;EAED,oBACElH,OAAA;IAAKyG,SAAS,EAAC,yBAAyB;IAAAC,QAAA,eACtC1G,OAAA;MAAKyG,SAAS,EAAC,WAAW;MAAAC,QAAA,gBACxB1G,OAAA;QAAKyG,SAAS,EAAC,mBAAmB;QAAAC,QAAA,gBAChC1G,OAAA;UAAIyG,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAEhG,UAAU,CAACiC;QAAI;UAAAgE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACjD9G,OAAA;UAAKyG,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC9B1G,OAAA;YAAKyG,SAAS,EAAC,kBAAkB;YAAAC,QAAA,gBAC/B1G,OAAA;cAAMyG,SAAS,EAAC,YAAY;cAAAC,QAAA,EAAC;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,KAAC,EAACE,UAAU,CAACtG,UAAU,CAACgH,UAAU,CAAC,eAC7E1H,OAAA;cAAMyG,SAAS,EAAC,YAAY;cAAAC,QAAA,EAAC;YAAK;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,KAAC,EAACE,UAAU,CAACtG,UAAU,CAACiH,QAAQ,CAAC;UAAA;YAAAhB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvE,CAAC,eACN9G,OAAA;YAAKyG,SAAS,EAAC,mBAAmB;YAAAC,QAAA,gBAChC1G,OAAA;cAAMyG,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAC;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,KAAC,EAACpG,UAAU,CAACkH,MAAM,eAChE5H,OAAA;cAAMyG,SAAS,EAAC,eAAe;cAAAC,QAAA,EAAC;YAAS;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,KAAC,EAACpG,UAAU,CAACmH,cAAc;UAAA;YAAAlB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxE,CAAC,EACLpG,UAAU,CAACoH,SAAS,iBAAI9H,OAAA;YAAKyG,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAM;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAELpG,UAAU,CAACqH,WAAW,iBACrB/H,OAAA;QAAKyG,SAAS,EAAC,wBAAwB;QAAAC,QAAA,EACpChG,UAAU,CAACqH;MAAW;QAAApB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpB,CACN,eAGD9G,OAAA;QAAKyG,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAC9B1G,OAAA;UACEyG,SAAS,EAAE,WAAWzF,SAAS,KAAK,UAAU,GAAG,QAAQ,GAAG,EAAE,EAAG;UACjE+F,OAAO,EAAEA,CAAA,KAAMpD,eAAe,CAAC,UAAU,CAAE;UAAA+C,QAAA,EAC5C;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT9G,OAAA;UACEyG,SAAS,EAAE,WAAWzF,SAAS,KAAK,WAAW,GAAG,QAAQ,GAAG,EAAE,EAAG;UAClE+F,OAAO,EAAEA,CAAA,KAAMpD,eAAe,CAAC,WAAW,CAAE;UAAA+C,QAAA,EAC7C;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT9G,OAAA;UACEyG,SAAS,EAAE,WAAWzF,SAAS,KAAK,SAAS,GAAG,QAAQ,GAAG,EAAE,EAAG;UAChE+F,OAAO,EAAEA,CAAA,KAAMpD,eAAe,CAAC,SAAS,CAAE;UAAA+C,QAAA,EAC3C;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT9G,OAAA;UACEyG,SAAS,EAAE,WAAWzF,SAAS,KAAK,OAAO,GAAG,QAAQ,GAAG,EAAE,EAAG;UAC9D+F,OAAO,EAAEA,CAAA,KAAMpD,eAAe,CAAC,OAAO,CAAE;UAAA+C,QAAA,EACzC;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT9G,OAAA;UACEyG,SAAS,EAAE,WAAWzF,SAAS,KAAK,SAAS,GAAG,QAAQ,GAAG,EAAE,EAAG;UAChE+F,OAAO,EAAEA,CAAA,KAAMpD,eAAe,CAAC,SAAS,CAAE;UAAA+C,QAAA,EAC3C;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAGN9G,OAAA;QAAKyG,SAAS,EAAC,aAAa;QAAAC,QAAA,GAEzB1F,SAAS,KAAK,UAAU,iBACvBhB,OAAA;UAAKyG,SAAS,EAAC,cAAc;UAAAC,QAAA,eAC3B1G,OAAA;YAAKyG,SAAS,EAAC,qBAAqB;YAAAC,QAAA,gBAClC1G,OAAA;cAAKyG,SAAS,EAAC,kBAAkB;cAAAC,QAAA,gBAC/B1G,OAAA;gBAAA0G,QAAA,EAAI;cAAkB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC3B9G,OAAA;gBAAKyG,SAAS,EAAC,eAAe;gBAAAC,QAAA,gBAC5B1G,OAAA;kBAAKyG,SAAS,EAAC,cAAc;kBAAAC,QAAA,gBAC3B1G,OAAA;oBAAKyG,SAAS,EAAC,YAAY;oBAAAC,QAAA,EAAC;kBAAK;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eACvC9G,OAAA;oBAAKyG,SAAS,EAAC,YAAY;oBAAAC,QAAA,EAAE,EAAAvG,iBAAA,GAAAO,UAAU,CAACsH,KAAK,cAAA7H,iBAAA,uBAAhBA,iBAAA,CAAkBmE,MAAM,KAAI;kBAAC;oBAAAqC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC9D,CAAC,eACN9G,OAAA;kBAAKyG,SAAS,EAAC,cAAc;kBAAAC,QAAA,gBAC3B1G,OAAA;oBAAKyG,SAAS,EAAC,YAAY;oBAAAC,QAAA,EAAC;kBAAO;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eACzC9G,OAAA;oBAAKyG,SAAS,EAAC,YAAY;oBAAAC,QAAA,EAAE,EAAAtG,oBAAA,GAAAM,UAAU,CAAC8C,OAAO,cAAApD,oBAAA,uBAAlBA,oBAAA,CAAoBkE,MAAM,KAAI;kBAAC;oBAAAqC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChE,CAAC,eACN9G,OAAA;kBAAKyG,SAAS,EAAC,cAAc;kBAAAC,QAAA,gBAC3B1G,OAAA;oBAAKyG,SAAS,EAAC,YAAY;oBAAAC,QAAA,EAAC;kBAAM;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eACxC9G,OAAA;oBAAKyG,SAAS,EAAC,YAAY;oBAAAC,QAAA,EAAEhG,UAAU,CAACoH,SAAS,GAAG,QAAQ,GAAG;kBAAW;oBAAAnB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC9E,CAAC,eACN9G,OAAA;kBAAKyG,SAAS,EAAC,cAAc;kBAAAC,QAAA,gBAC3B1G,OAAA;oBAAKyG,SAAS,EAAC,YAAY;oBAAAC,QAAA,EAAC;kBAAU;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eAC5C9G,OAAA;oBAAKyG,SAAS,EAAC,YAAY;oBAAAC,QAAA,EAAEhG,UAAU,CAACuH,SAAS,GAAG,QAAQ,GAAG;kBAAS;oBAAAtB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5E,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAEN9G,OAAA;cAAKyG,SAAS,EAAC,kBAAkB;cAAAC,QAAA,gBAC/B1G,OAAA;gBAAA0G,QAAA,EAAI;cAAU;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,EAClBpG,UAAU,CAAC8C,OAAO,IAAI9C,UAAU,CAAC8C,OAAO,CAACc,MAAM,GAAG,CAAC,gBAClDtE,OAAA;gBAAKyG,SAAS,EAAC,iBAAiB;gBAAAC,QAAA,gBAC9B1G,OAAA;kBAAKyG,SAAS,EAAC,cAAc;kBAAAC,QAAA,GAAC,SAAO,EAAChG,UAAU,CAAC8C,OAAO,CAAC,CAAC,CAAC,CAAC0E,YAAY;gBAAA;kBAAAvB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC/E9G,OAAA;kBAAKyG,SAAS,EAAC,UAAU;kBAAAC,QAAA,EAAEhG,UAAU,CAAC8C,OAAO,CAAC,CAAC,CAAC,CAAC2E;gBAAQ;kBAAAxB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAChE9G,OAAA;kBAAKyG,SAAS,EAAC,cAAc;kBAAAC,QAAA,EAC1BhG,UAAU,CAAC8C,OAAO,CAAC,CAAC,CAAC,CAAC4E,QAAQ,GAAG,UAAU,GAAG;gBAAS;kBAAAzB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACrD,CAAC,eACN9G,OAAA,CAACX,IAAI;kBACHgJ,EAAE,EAAE,YAAY3H,UAAU,CAAC8C,OAAO,CAAC,CAAC,CAAC,CAAC2E,QAAQ,EAAG;kBACjD1B,SAAS,EAAC,gBAAgB;kBAAAC,QAAA,EAC3B;gBAED;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC,gBAEN9G,OAAA;gBAAKyG,SAAS,EAAC,YAAY;gBAAAC,QAAA,EAAC;cAAwB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAC1D;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC,EAELpG,UAAU,CAAC+D,SAAS,iBACnBzE,OAAA;cAAKyG,SAAS,EAAC,kBAAkB;cAAAC,QAAA,gBAC/B1G,OAAA;gBAAA0G,QAAA,EAAI;cAAiB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC1B9G,OAAA;gBAAKyG,SAAS,EAAC,WAAW;gBAAAC,QAAA,EACvBhC,IAAI,CAACG,KAAK,CAACnE,UAAU,CAAC+D,SAAS,CAAC,CAAClB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC+E,GAAG,CAAC,CAACtD,IAAI,EAAEuD,KAAK,kBAC5DvI,OAAA;kBAAuByG,SAAS,EAAE,iBAAiB8B,KAAK,GAAG,CAAC,EAAG;kBAAA7B,QAAA,gBAC7D1G,OAAA;oBAAKyG,SAAS,EAAC,WAAW;oBAAAC,QAAA,GAAC,GAAC,EAAC1B,IAAI,CAACC,IAAI;kBAAA;oBAAA0B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC7C9G,OAAA;oBAAKyG,SAAS,EAAC,WAAW;oBAAAC,QAAA,EAAE1B,IAAI,CAACE;kBAAQ;oBAAAyB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAChD9G,OAAA;oBAAKyG,SAAS,EAAC,aAAa;oBAAAC,QAAA,GAAE1B,IAAI,CAACG,WAAW,EAAC,MAAI;kBAAA;oBAAAwB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC;gBAAA,GAHjD9B,IAAI,CAACwD,MAAM;kBAAA7B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAIhB,CACN;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACN9G,OAAA,CAACX,IAAI;gBACHgJ,EAAE,EAAC,GAAG;gBACNtB,OAAO,EAAEA,CAAA,KAAMpD,eAAe,CAAC,WAAW,CAAE;gBAC5C8C,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAC1B;cAED;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN,EAGA9F,SAAS,KAAK,WAAW,iBACxBhB,OAAA;UAAKyG,SAAS,EAAC,eAAe;UAAAC,QAAA,gBAC5B1G,OAAA,CAACJ,qBAAqB;YAACW,YAAY,EAAEA;UAAa;YAAAoG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAErD9G,OAAA;YAAKyG,SAAS,EAAC,mBAAmB;YAAAC,QAAA,gBAChC1G,OAAA;cACEyG,SAAS,EAAC,2BAA2B;cACrCM,OAAO,EAAE3C,wBAAyB;cAClCqE,QAAQ,EAAEvH,oBAAoB,IAAI,EAAAb,oBAAA,GAAAK,UAAU,CAAC8C,OAAO,cAAAnD,oBAAA,uBAAlBA,oBAAA,CAAoBiE,MAAM,MAAK,CAAE;cAAAoC,QAAA,EAElExF,oBAAoB,GAAG,gBAAgB,GAAG;YAAuB;cAAAyF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5D,CAAC,eACT9G,OAAA;cACEyG,SAAS,EAAC,0BAA0B;cACpCM,OAAO,EAAEnC,qBAAsB;cAC/B6D,QAAQ,EAAE,CAAC/H,UAAU,CAAC+D,SAAU;cAAAiC,QAAA,EACjC;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN,EAGA9F,SAAS,KAAK,SAAS,iBACtBhB,OAAA;UAAKyG,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1B1G,OAAA;YAAKyG,SAAS,EAAC,iBAAiB;YAAAC,QAAA,eAC9B1G,OAAA,CAACX,IAAI;cAACgJ,EAAE,EAAE,gCAAgC9H,YAAY,EAAG;cAACkG,SAAS,EAAC,iBAAiB;cAAAC,QAAA,EAAC;YAEtF;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,EAELpG,UAAU,CAAC8C,OAAO,IAAI9C,UAAU,CAAC8C,OAAO,CAACc,MAAM,GAAG,CAAC,gBAClDtE,OAAA;YAAKyG,SAAS,EAAC,cAAc;YAAAC,QAAA,gBAC3B1G,OAAA;cAAA0G,QAAA,EAAI;YAAkB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC3B9G,OAAA;cAAKyG,SAAS,EAAC,cAAc;cAAAC,QAAA,EAC1BhG,UAAU,CAAC8C,OAAO,CAChBkF,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACT,YAAY,GAAGU,CAAC,CAACV,YAAY,CAAC,CAC/CI,GAAG,CAACO,KAAK,iBACR7I,OAAA;gBAAoByG,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACxC1G,OAAA;kBAAKyG,SAAS,EAAC,cAAc;kBAAAC,QAAA,gBAC3B1G,OAAA;oBAAKyG,SAAS,EAAC,cAAc;oBAAAC,QAAA,GAAC,SAAO,EAACmC,KAAK,CAACX,YAAY;kBAAA;oBAAAvB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC/D9G,OAAA;oBAAKyG,SAAS,EAAC,aAAa;oBAAAC,QAAA,EAAEmC,KAAK,CAACC;kBAAK;oBAAAnC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7C,CAAC,eACN9G,OAAA;kBAAKyG,SAAS,EAAC,YAAY;kBAAAC,QAAA,gBACzB1G,OAAA;oBAAKyG,SAAS,EAAC,UAAU;oBAAAC,QAAA,GAAC,MAAI,EAACmC,KAAK,CAACV,QAAQ;kBAAA;oBAAAxB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACpD9G,OAAA;oBAAKyG,SAAS,EAAC,cAAc;oBAAAC,QAAA,EAC1BmC,KAAK,CAACT,QAAQ,GAAG,UAAU,GAAG;kBAAS;oBAAAzB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACrC,CAAC,eACN9G,OAAA;oBAAKyG,SAAS,EAAC,YAAY;oBAAAC,QAAA,EACxB,IAAIxD,IAAI,CAAC2F,KAAK,CAACE,aAAa,CAAC,CAACvB,kBAAkB,CAAC;kBAAC;oBAAAb,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAChD,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eACN9G,OAAA;kBAAKyG,SAAS,EAAC,eAAe;kBAAAC,QAAA,eAC5B1G,OAAA,CAACX,IAAI;oBACHgJ,EAAE,EAAE,YAAYQ,KAAK,CAACV,QAAQ,EAAG;oBACjC1B,SAAS,EAAC,gBAAgB;oBAAAC,QAAA,EAC3B;kBAED;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC;cAAA,GArBE+B,KAAK,CAACvI,EAAE;gBAAAqG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAsBb,CACN;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAED,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,gBAEN9G,OAAA;YAAKyG,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzB1G,OAAA;cAAA0G,QAAA,EAAG;YAAkD;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eACzD9G,OAAA;cAAA0G,QAAA,EAAG;YAAkE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtE,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CACN,EAGA9F,SAAS,KAAK,OAAO,iBACpBhB,OAAA;UAAKyG,SAAS,EAAC,WAAW;UAAAC,QAAA,gBACxB1G,OAAA;YAAKyG,SAAS,EAAC,eAAe;YAAAC,QAAA,eAC5B1G,OAAA;cACEyG,SAAS,EAAC,0BAA0B;cACpCM,OAAO,EAAEA,CAAA,KAAM1F,qBAAqB,CAAC,IAAI,CAAE;cAAAqF,QAAA,EAC5C;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eAGN9G,OAAA,CAACH,KAAK;YACJmJ,MAAM,EAAE5H,kBAAmB;YAC3B6H,OAAO,EAAEA,CAAA,KAAM5H,qBAAqB,CAAC,KAAK,CAAE;YAAAqF,QAAA,eAE5C1G,OAAA,CAACF,mBAAmB;cAClBS,YAAY,EAAEA,YAAa;cAC3B2I,SAAS,EAAEA,CAAA,KAAM;gBACf7H,qBAAqB,CAAC,KAAK,CAAC;gBAC5B;gBACA,MAAM8H,qBAAqB,GAAG,MAAAA,CAAA,KAAY;kBACxC,IAAI;oBACFtH,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC;oBAC3D;oBACArC,iBAAiB,CAACiE,UAAU,CAAC,cAAcnD,YAAY,EAAE,CAAC;oBAC1D,MAAMgC,QAAQ,GAAG,MAAM9C,iBAAiB,CAAC+C,iBAAiB,CAACjC,YAAY,CAAC;oBACxEI,aAAa,CAAC4B,QAAQ,CAACG,IAAI,CAACA,IAAI,CAAC;oBACjCb,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAES,QAAQ,CAACG,IAAI,CAACA,IAAI,CAAC;kBAC/D,CAAC,CAAC,OAAOE,GAAG,EAAE;oBACZf,OAAO,CAACf,KAAK,CAAC,mCAAmC,EAAE8B,GAAG,CAAC;kBACzD;gBACF,CAAC;gBACDuG,qBAAqB,CAAC,CAAC;;gBAEvB;gBACAxH,kBAAkB,CAACsB,IAAI,IAAI,CACzB;kBACE3C,EAAE,EAAE4C,IAAI,CAACC,GAAG,CAAC,CAAC;kBACdC,IAAI,EAAE,aAAa;kBACnBC,SAAS,EAAE,IAAIH,IAAI,CAAC,CAAC;kBACrBI,OAAO,EAAE;oBAAE/C;kBAAa;gBAC1B,CAAC,EACD,GAAG0C,IAAI,CAACM,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CACrB,CAAC;cACJ,CAAE;cACF6F,QAAQ,EAAEA,CAAA,KAAM/H,qBAAqB,CAAC,KAAK;YAAE;cAAAsF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9C;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACG,CAAC,EAEPpG,UAAU,CAACsH,KAAK,IAAItH,UAAU,CAACsH,KAAK,CAAC1D,MAAM,GAAG,CAAC,gBAC9CtE,OAAA;YAAKyG,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzB1G,OAAA;cAAA0G,QAAA,EAAI;YAAmB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC5B9G,OAAA;cAAKyG,SAAS,EAAC,YAAY;cAAAC,QAAA,EACxBhG,UAAU,CAACsH,KAAK,CAACM,GAAG,CAACtD,IAAI,iBACxBhF,OAAA;gBAAmByG,SAAS,EAAC,WAAW;gBAAAC,QAAA,GACrC1B,IAAI,CAACqE,QAAQ,iBACZrJ,OAAA;kBAAKyG,SAAS,EAAC,WAAW;kBAAAC,QAAA,eACxB1G,OAAA;oBAAKsJ,GAAG,EAAEtE,IAAI,CAACqE,QAAS;oBAACE,GAAG,EAAE,GAAGvE,IAAI,CAACrC,IAAI;kBAAQ;oBAAAgE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAClD,CACN,eACD9G,OAAA;kBAAKyG,SAAS,EAAC,WAAW;kBAAAC,QAAA,gBACxB1G,OAAA;oBAAKyG,SAAS,EAAC,WAAW;oBAAAC,QAAA,GACvB1B,IAAI,CAACwE,GAAG,iBAAIxJ,OAAA;sBAAMyG,SAAS,EAAC,UAAU;sBAAAC,QAAA,GAAC,GAAC,EAAC1B,IAAI,CAACwE,GAAG,EAAC,GAAC;oBAAA;sBAAA7C,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,EAC1D9B,IAAI,CAACrC,IAAI;kBAAA;oBAAAgE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACP,CAAC,eACN9G,OAAA;oBAAKyG,SAAS,EAAC,WAAW;oBAAAC,QAAA,GAAC,QACnB,EAAC1B,IAAI,CAACyE,WAAW,IAAI,UAAU;kBAAA;oBAAA9C,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAClC,CAAC,eACN9G,OAAA;oBAAKyG,SAAS,EAAC,aAAa;oBAAAC,QAAA,EACzB1B,IAAI,CAAC8C,SAAS,GAAG,QAAQ,GAAG;kBAAU;oBAAAnB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACpC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eACN9G,OAAA;kBAAKyG,SAAS,EAAC,cAAc;kBAAAC,QAAA,eAC3B1G,OAAA,CAACX,IAAI;oBACHgJ,EAAE,EAAE,UAAUrD,IAAI,CAAC1E,EAAE,EAAG;oBACxBmG,SAAS,EAAC,eAAe;oBAAAC,QAAA,EAC1B;kBAED;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC;cAAA,GAzBE9B,IAAI,CAAC1E,EAAE;gBAAAqG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OA0BZ,CACN;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,gBAEN9G,OAAA;YAAKyG,SAAS,EAAC,UAAU;YAAAC,QAAA,gBACvB1G,OAAA;cAAA0G,QAAA,EAAG;YAAgD;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eACvD9G,OAAA;cAAA0G,QAAA,EAAG;YAAgE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpE,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CACN,EAGA9F,SAAS,KAAK,SAAS,iBACtBhB,OAAA;UAAKyG,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1B1G,OAAA;YAAA0G,QAAA,EAAI;UAAuB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAChC9G,OAAA;YAAKyG,SAAS,EAAC,mBAAmB;YAAAC,QAAA,EAC/BhF,eAAe,CAAC4C,MAAM,GAAG,CAAC,gBACzBtE,OAAA;cAAKyG,SAAS,EAAC,cAAc;cAAAC,QAAA,EAC1BhF,eAAe,CAAC4G,GAAG,CAACoB,MAAM,iBACzB1J,OAAA;gBAAqByG,SAAS,EAAE,sBAAsBiD,MAAM,CAACtG,IAAI,CAACuG,WAAW,CAAC,CAAC,EAAG;gBAAAjD,QAAA,gBAChF1G,OAAA;kBAAKyG,SAAS,EAAC,aAAa;kBAAAC,QAAA,EACzBgD,MAAM,CAACrG,SAAS,CAACuG,kBAAkB,CAAC;gBAAC;kBAAAjD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnC,CAAC,eACN9G,OAAA;kBAAKyG,SAAS,EAAC,gBAAgB;kBAAAC,QAAA,EAC5BmD,mBAAmB,CAACH,MAAM;gBAAC;kBAAA/C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACzB,CAAC;cAAA,GANE4C,MAAM,CAACpJ,EAAE;gBAAAqG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAOd,CACN;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC,gBAEN9G,OAAA;cAAKyG,SAAS,EAAC,YAAY;cAAAC,QAAA,gBACzB1G,OAAA;gBAAA0G,QAAA,EAAG;cAAoB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eAC3B9G,OAAA;gBAAA0G,QAAA,EAAG;cAAoE;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxE;UACN;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;;AAED;AAAA5G,EAAA,CA5mBMD,iBAAiB;EAAA,QACQb,SAAS,EACrBE,WAAW,EACXC,WAAW,EAOmCG,SAAS;AAAA;AAAAoK,EAAA,GAVpE7J,iBAAiB;AA6mBvB,MAAM4J,mBAAmB,GAAIH,MAAM,IAAK;EACtC,QAAQA,MAAM,CAACtG,IAAI;IACjB,KAAK,eAAe;MAClB,OAAO,GAAGsG,MAAM,CAACpG,OAAO,CAACyG,KAAK,CAACzF,MAAM,wCAAwC;IAC/E,KAAK,kBAAkB;MACrB,OAAO,wCAAwC;IACjD,KAAK,iBAAiB;MACpB,OAAO,UAAUoF,MAAM,CAACpG,OAAO,CAAC0G,WAAW,IAAI,EAAE,YAAY;IAC/D,KAAK,aAAa;MAChB,OAAO,SAASN,MAAM,CAACpG,OAAO,CAAC4B,QAAQ,yBAAyB;IAClE;MACE,OAAO,4BAA4B;EACvC;AACF,CAAC;AAED,eAAejF,iBAAiB;AAAC,IAAA6J,EAAA;AAAAG,YAAA,CAAAH,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}