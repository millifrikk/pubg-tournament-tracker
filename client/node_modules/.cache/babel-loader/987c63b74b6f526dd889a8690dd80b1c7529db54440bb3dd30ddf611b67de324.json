{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import teamService from'../../services/teamService';import authService from'../../services/authService';import LoadingSpinner from'../../components/common/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateTeam=()=>{const navigate=useNavigate();const[loading,setLoading]=useState(false);const[error,setError]=useState(null);// Form state\nconst[formData,setFormData]=useState({name:'',tag:'',logoUrl:''});useEffect(()=>{// Check if user is logged in\nconst token=localStorage.getItem('token');console.log('Current authentication token:',token?'Present':'Missing');if(!token){setError('You must be logged in to create a team');}},[]);// Handle input changes\nconst handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));// Auto-generate tag from name\nif(name==='name'&&!formData.tag){// Create tag from first 4 letters of name\nconst tag=value.substring(0,4).toUpperCase();setFormData(prev=>({...prev,tag}));}};// Handle form submission\nconst handleSubmit=async e=>{e.preventDefault();setLoading(true);setError(null);try{// Check auth token\nconst token=localStorage.getItem('token');if(!token){throw new Error('Authentication required. Please log in first.');}// Create team\nconsole.log('Creating team with teamService:',formData);console.log('Using authentication token:',token.substring(0,15)+'...');// Create team data object that matches the server's expectations\nconst teamData={name:formData.name,tag:formData.tag,logoUrl:formData.logoUrl};const response=await teamService.createTeam(teamData);console.log('Team creation successful:',response);// Redirect to team details page\nnavigate(`/teams/${response.data.id}`);}catch(err){var _err$response,_err$response$data,_err$message,_err$message2;console.error('Error creating team:',err);let errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to create team';// Check for specific error types\nif((_err$message=err.message)!==null&&_err$message!==void 0&&_err$message.includes('Authorization')||(_err$message2=err.message)!==null&&_err$message2!==void 0&&_err$message2.includes('Authentication')){errorMessage=`Authentication error: ${err.message}. Please try logging in again.`;}console.log('Setting error:',errorMessage);setError(errorMessage);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"create-team-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Create Team\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:/*#__PURE__*/_jsx(\"p\",{children:error})}),loading?/*#__PURE__*/_jsx(LoadingSpinner,{}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"team-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Team Name*\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",value:formData.name,onChange:handleInputChange,required:true,maxLength:\"100\",placeholder:\"Enter team name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tag\",children:\"Team Tag\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"tag\",name:\"tag\",value:formData.tag,onChange:handleInputChange,maxLength:\"10\",placeholder:\"e.g. TEAM\"}),/*#__PURE__*/_jsx(\"p\",{className:\"help-text\",children:\"A short, up to 10 characters tag for your team. This will be shown in brackets [TAG].\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"logoUrl\",children:\"Logo URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",id:\"logoUrl\",name:\"logoUrl\",value:formData.logoUrl,onChange:handleInputChange,placeholder:\"https://example.com/logo.png\"}),/*#__PURE__*/_jsx(\"p\",{className:\"help-text\",children:\"Optional URL to your team's logo image.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary\",onClick:()=>navigate('/teams'),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",children:\"Create Team\"})]})]})]})});};export default CreateTeam;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","teamService","authService","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","CreateTeam","navigate","loading","setLoading","error","setError","formData","setFormData","name","tag","logoUrl","token","localStorage","getItem","console","log","handleInputChange","e","value","target","prev","substring","toUpperCase","handleSubmit","preventDefault","Error","teamData","response","createTeam","data","id","err","_err$response","_err$response$data","_err$message","_err$message2","errorMessage","message","includes","className","children","onSubmit","htmlFor","type","onChange","required","maxLength","placeholder","onClick"],"sources":["C:/Users/emil/OneDrive/Documents/development/apiDevelopment/pubg-tournament-tracker/client/src/pages/teams/CreateTeam.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport teamService from '../../services/teamService';\nimport authService from '../../services/authService';\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\n\nconst CreateTeam = () => {\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  \n  // Form state\n  const [formData, setFormData] = useState({\n    name: '',\n    tag: '',\n    logoUrl: ''\n  });\n  \n  useEffect(() => {\n    // Check if user is logged in\n    const token = localStorage.getItem('token');\n    console.log('Current authentication token:', token ? 'Present' : 'Missing');\n    \n    if (!token) {\n      setError('You must be logged in to create a team');\n    }\n  }, []);\n  \n  // Handle input changes\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    // Auto-generate tag from name\n    if (name === 'name' && !formData.tag) {\n      // Create tag from first 4 letters of name\n      const tag = value.substring(0, 4).toUpperCase();\n      setFormData(prev => ({\n        ...prev,\n        tag\n      }));\n    }\n  };\n  \n  // Handle form submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    \n    try {\n      // Check auth token\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('Authentication required. Please log in first.');\n      }\n      \n      // Create team\n      console.log('Creating team with teamService:', formData);\n      console.log('Using authentication token:', token.substring(0, 15) + '...');\n      \n      // Create team data object that matches the server's expectations\n      const teamData = {\n        name: formData.name,\n        tag: formData.tag,\n        logoUrl: formData.logoUrl\n      };\n      \n      const response = await teamService.createTeam(teamData);\n      console.log('Team creation successful:', response);\n      \n      // Redirect to team details page\n      navigate(`/teams/${response.data.id}`);\n    } catch (err) {\n      console.error('Error creating team:', err);\n      let errorMessage = err.response?.data?.error || 'Failed to create team';\n      \n      // Check for specific error types\n      if (err.message?.includes('Authorization') || err.message?.includes('Authentication')) {\n        errorMessage = `Authentication error: ${err.message}. Please try logging in again.`;\n      }\n      \n      console.log('Setting error:', errorMessage);\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  return (\n    <div className=\"create-team-page\">\n      <div className=\"container\">\n        <h1 className=\"page-title\">Create Team</h1>\n        \n        {error && (\n          <div className=\"error-message\">\n            <p>{error}</p>\n          </div>\n        )}\n        \n        {loading ? (\n          <LoadingSpinner />\n        ) : (\n          <form onSubmit={handleSubmit} className=\"team-form\">\n            <div className=\"form-group\">\n              <label htmlFor=\"name\">Team Name*</label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleInputChange}\n                required\n                maxLength=\"100\"\n                placeholder=\"Enter team name\"\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label htmlFor=\"tag\">Team Tag</label>\n              <input\n                type=\"text\"\n                id=\"tag\"\n                name=\"tag\"\n                value={formData.tag}\n                onChange={handleInputChange}\n                maxLength=\"10\"\n                placeholder=\"e.g. TEAM\"\n              />\n              <p className=\"help-text\">\n                A short, up to 10 characters tag for your team. This will be shown in brackets [TAG].\n              </p>\n            </div>\n            \n            <div className=\"form-group\">\n              <label htmlFor=\"logoUrl\">Logo URL</label>\n              <input\n                type=\"url\"\n                id=\"logoUrl\"\n                name=\"logoUrl\"\n                value={formData.logoUrl}\n                onChange={handleInputChange}\n                placeholder=\"https://example.com/logo.png\"\n              />\n              <p className=\"help-text\">\n                Optional URL to your team's logo image.\n              </p>\n            </div>\n            \n            <div className=\"form-actions\">\n              <button type=\"button\" className=\"btn-secondary\" onClick={() => navigate('/teams')}>\n                Cancel\n              </button>\n              <button type=\"submit\" className=\"btn-primary\">\n                Create Team\n              </button>\n            </div>\n          </form>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CreateTeam;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}