{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import teamService from'../../services/teamService';import PlayerList from'./PlayerList';import PlayerForm from'./PlayerForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TeamDetails=()=>{const{id}=useParams();const navigate=useNavigate();const[team,setTeam]=useState(null);const[players,setPlayers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[showPlayerForm,setShowPlayerForm]=useState(false);// Fetch team details\nuseEffect(()=>{const fetchTeamDetails=async()=>{try{setLoading(true);setError(null);const teamResponse=await teamService.getTeamById(id);setTeam(teamResponse.data);const playersResponse=await teamService.getTeamPlayers(id);setPlayers(playersResponse.data||[]);}catch(err){console.error('Error fetching team details:',err);setError('Failed to load team details');}finally{setLoading(false);}};if(id){fetchTeamDetails();}},[id]);// Handle adding a new player\nconst handleAddPlayer=async playerData=>{try{setError(null);console.log('Adding player with data:',playerData);const response=await teamService.addPlayerToTeam(id,playerData);// Refresh player list after adding a player to ensure we have the latest data\nconst playersResponse=await teamService.getTeamPlayers(id);setPlayers(playersResponse.data||[]);setShowPlayerForm(false);}catch(err){console.error('Error adding player:',err);setError('Failed to add player: '+(err.message||'Unknown error'));}};// Handle removing a player\nconst handleRemovePlayer=async playerId=>{try{setError(null);await teamService.removePlayerFromTeam(id,playerId);setPlayers(prev=>prev.filter(player=>player.id!==playerId));}catch(err){console.error('Error removing player:',err);setError('Failed to remove player');}};// Handle updating a player\nconst handleUpdatePlayer=async(playerId,updatedData)=>{try{setError(null);const response=await teamService.updatePlayer(playerId,updatedData);setPlayers(prev=>prev.map(player=>player.id===playerId?response.data:player));}catch(err){console.error('Error updating player:',err);setError('Failed to update player');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center\",children:\"Loading team details...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-red-100 text-red-700 rounded\",children:[/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 px-4 py-2 bg-blue-500 text-white rounded\",onClick:()=>navigate('/teams'),children:\"Back to Teams\"})]});}if(!team){return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Team not found\"}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 px-4 py-2 bg-blue-500 text-white rounded\",onClick:()=>navigate('/teams'),children:\"Back to Teams\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold\",children:[team.logo_url&&/*#__PURE__*/_jsx(\"img\",{src:team.logo_url,alt:`${team.name} logo`,className:\"inline-block h-8 w-8 mr-2\"}),team.name,team.tag&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-gray-500\",children:[\"(\",team.tag,\")\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 bg-blue-500 text-white rounded\",onClick:()=>navigate('/teams'),children:\"Back to Teams\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold\",children:\"Team Players\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 bg-green-500 text-white rounded\",onClick:()=>setShowPlayerForm(!showPlayerForm),children:showPlayerForm?'Cancel':'Add Player'})]}),showPlayerForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-4 bg-gray-100 rounded\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium mb-2\",children:\"Add New Player\"}),/*#__PURE__*/_jsx(PlayerForm,{onSubmit:handleAddPlayer,onCancel:()=>setShowPlayerForm(false)})]}),/*#__PURE__*/_jsx(PlayerList,{players:players,onRemove:handleRemovePlayer,onUpdate:handleUpdatePlayer})]})]});};export default TeamDetails;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","teamService","PlayerList","PlayerForm","jsx","_jsx","jsxs","_jsxs","TeamDetails","id","navigate","team","setTeam","players","setPlayers","loading","setLoading","error","setError","showPlayerForm","setShowPlayerForm","fetchTeamDetails","teamResponse","getTeamById","data","playersResponse","getTeamPlayers","err","console","handleAddPlayer","playerData","log","response","addPlayerToTeam","message","handleRemovePlayer","playerId","removePlayerFromTeam","prev","filter","player","handleUpdatePlayer","updatedData","updatePlayer","map","className","children","onClick","logo_url","src","alt","name","tag","onSubmit","onCancel","onRemove","onUpdate"],"sources":["C:/Users/emil/OneDrive/Documents/development/apiDevelopment/pubg-tournament-tracker/client/src/components/teams/TeamDetails.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport teamService from '../../services/teamService';\nimport PlayerList from './PlayerList';\nimport PlayerForm from './PlayerForm';\n\nconst TeamDetails = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [team, setTeam] = useState(null);\n  const [players, setPlayers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showPlayerForm, setShowPlayerForm] = useState(false);\n  \n  // Fetch team details\n  useEffect(() => {\n    const fetchTeamDetails = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        \n        const teamResponse = await teamService.getTeamById(id);\n        setTeam(teamResponse.data);\n        \n        const playersResponse = await teamService.getTeamPlayers(id);\n        setPlayers(playersResponse.data || []);\n      } catch (err) {\n        console.error('Error fetching team details:', err);\n        setError('Failed to load team details');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    if (id) {\n      fetchTeamDetails();\n    }\n  }, [id]);\n  \n  // Handle adding a new player\n  const handleAddPlayer = async (playerData) => {\n    try {\n      setError(null);\n      console.log('Adding player with data:', playerData);\n      const response = await teamService.addPlayerToTeam(id, playerData);\n      \n      // Refresh player list after adding a player to ensure we have the latest data\n      const playersResponse = await teamService.getTeamPlayers(id);\n      setPlayers(playersResponse.data || []);\n      \n      setShowPlayerForm(false);\n    } catch (err) {\n      console.error('Error adding player:', err);\n      setError('Failed to add player: ' + (err.message || 'Unknown error'));\n    }\n  };\n  \n  // Handle removing a player\n  const handleRemovePlayer = async (playerId) => {\n    try {\n      setError(null);\n      await teamService.removePlayerFromTeam(id, playerId);\n      setPlayers(prev => prev.filter(player => player.id !== playerId));\n    } catch (err) {\n      console.error('Error removing player:', err);\n      setError('Failed to remove player');\n    }\n  };\n  \n  // Handle updating a player\n  const handleUpdatePlayer = async (playerId, updatedData) => {\n    try {\n      setError(null);\n      const response = await teamService.updatePlayer(playerId, updatedData);\n      setPlayers(prev => prev.map(player => \n        player.id === playerId ? response.data : player\n      ));\n    } catch (err) {\n      console.error('Error updating player:', err);\n      setError('Failed to update player');\n    }\n  };\n  \n  if (loading) {\n    return <div className=\"p-4 text-center\">Loading team details...</div>;\n  }\n  \n  if (error) {\n    return (\n      <div className=\"p-4 bg-red-100 text-red-700 rounded\">\n        <p>{error}</p>\n        <button \n          className=\"mt-2 px-4 py-2 bg-blue-500 text-white rounded\"\n          onClick={() => navigate('/teams')}\n        >\n          Back to Teams\n        </button>\n      </div>\n    );\n  }\n  \n  if (!team) {\n    return (\n      <div className=\"p-4 text-center\">\n        <p>Team not found</p>\n        <button \n          className=\"mt-2 px-4 py-2 bg-blue-500 text-white rounded\"\n          onClick={() => navigate('/teams')}\n        >\n          Back to Teams\n        </button>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"p-4\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-2xl font-bold\">\n          {team.logo_url && (\n            <img \n              src={team.logo_url} \n              alt={`${team.name} logo`} \n              className=\"inline-block h-8 w-8 mr-2\"\n            />\n          )}\n          {team.name}\n          {team.tag && <span className=\"ml-2 text-gray-500\">({team.tag})</span>}\n        </h1>\n        <button \n          className=\"px-4 py-2 bg-blue-500 text-white rounded\"\n          onClick={() => navigate('/teams')}\n        >\n          Back to Teams\n        </button>\n      </div>\n      \n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-semibold\">Team Players</h2>\n          <button \n            className=\"px-4 py-2 bg-green-500 text-white rounded\"\n            onClick={() => setShowPlayerForm(!showPlayerForm)}\n          >\n            {showPlayerForm ? 'Cancel' : 'Add Player'}\n          </button>\n        </div>\n        \n        {showPlayerForm && (\n          <div className=\"mb-4 p-4 bg-gray-100 rounded\">\n            <h3 className=\"text-lg font-medium mb-2\">Add New Player</h3>\n            <PlayerForm \n              onSubmit={handleAddPlayer} \n              onCancel={() => setShowPlayerForm(false)}\n            />\n          </div>\n        )}\n        \n        <PlayerList \n          players={players} \n          onRemove={handleRemovePlayer}\n          onUpdate={handleUpdatePlayer}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default TeamDetails;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,WAAW,KAAM,4BAA4B,CACpD,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,MAAO,CAAAC,UAAU,KAAM,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtC,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAAEC,EAAG,CAAC,CAAGV,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAW,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACW,IAAI,CAAEC,OAAO,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACoB,KAAK,CAAEC,QAAQ,CAAC,CAAGrB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACsB,cAAc,CAAEC,iBAAiB,CAAC,CAAGvB,QAAQ,CAAC,KAAK,CAAC,CAE3D;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAuB,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACFL,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CAEd,KAAM,CAAAI,YAAY,CAAG,KAAM,CAAArB,WAAW,CAACsB,WAAW,CAACd,EAAE,CAAC,CACtDG,OAAO,CAACU,YAAY,CAACE,IAAI,CAAC,CAE1B,KAAM,CAAAC,eAAe,CAAG,KAAM,CAAAxB,WAAW,CAACyB,cAAc,CAACjB,EAAE,CAAC,CAC5DK,UAAU,CAACW,eAAe,CAACD,IAAI,EAAI,EAAE,CAAC,CACxC,CAAE,MAAOG,GAAG,CAAE,CACZC,OAAO,CAACX,KAAK,CAAC,8BAA8B,CAAEU,GAAG,CAAC,CAClDT,QAAQ,CAAC,6BAA6B,CAAC,CACzC,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAIP,EAAE,CAAE,CACNY,gBAAgB,CAAC,CAAC,CACpB,CACF,CAAC,CAAE,CAACZ,EAAE,CAAC,CAAC,CAER;AACA,KAAM,CAAAoB,eAAe,CAAG,KAAO,CAAAC,UAAU,EAAK,CAC5C,GAAI,CACFZ,QAAQ,CAAC,IAAI,CAAC,CACdU,OAAO,CAACG,GAAG,CAAC,0BAA0B,CAAED,UAAU,CAAC,CACnD,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAA/B,WAAW,CAACgC,eAAe,CAACxB,EAAE,CAAEqB,UAAU,CAAC,CAElE;AACA,KAAM,CAAAL,eAAe,CAAG,KAAM,CAAAxB,WAAW,CAACyB,cAAc,CAACjB,EAAE,CAAC,CAC5DK,UAAU,CAACW,eAAe,CAACD,IAAI,EAAI,EAAE,CAAC,CAEtCJ,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAE,MAAOO,GAAG,CAAE,CACZC,OAAO,CAACX,KAAK,CAAC,sBAAsB,CAAEU,GAAG,CAAC,CAC1CT,QAAQ,CAAC,wBAAwB,EAAIS,GAAG,CAACO,OAAO,EAAI,eAAe,CAAC,CAAC,CACvE,CACF,CAAC,CAED;AACA,KAAM,CAAAC,kBAAkB,CAAG,KAAO,CAAAC,QAAQ,EAAK,CAC7C,GAAI,CACFlB,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAjB,WAAW,CAACoC,oBAAoB,CAAC5B,EAAE,CAAE2B,QAAQ,CAAC,CACpDtB,UAAU,CAACwB,IAAI,EAAIA,IAAI,CAACC,MAAM,CAACC,MAAM,EAAIA,MAAM,CAAC/B,EAAE,GAAK2B,QAAQ,CAAC,CAAC,CACnE,CAAE,MAAOT,GAAG,CAAE,CACZC,OAAO,CAACX,KAAK,CAAC,wBAAwB,CAAEU,GAAG,CAAC,CAC5CT,QAAQ,CAAC,yBAAyB,CAAC,CACrC,CACF,CAAC,CAED;AACA,KAAM,CAAAuB,kBAAkB,CAAG,KAAAA,CAAOL,QAAQ,CAAEM,WAAW,GAAK,CAC1D,GAAI,CACFxB,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAc,QAAQ,CAAG,KAAM,CAAA/B,WAAW,CAAC0C,YAAY,CAACP,QAAQ,CAAEM,WAAW,CAAC,CACtE5B,UAAU,CAACwB,IAAI,EAAIA,IAAI,CAACM,GAAG,CAACJ,MAAM,EAChCA,MAAM,CAAC/B,EAAE,GAAK2B,QAAQ,CAAGJ,QAAQ,CAACR,IAAI,CAAGgB,MAC3C,CAAC,CAAC,CACJ,CAAE,MAAOb,GAAG,CAAE,CACZC,OAAO,CAACX,KAAK,CAAC,wBAAwB,CAAEU,GAAG,CAAC,CAC5CT,QAAQ,CAAC,yBAAyB,CAAC,CACrC,CACF,CAAC,CAED,GAAIH,OAAO,CAAE,CACX,mBAAOV,IAAA,QAAKwC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,yBAAuB,CAAK,CAAC,CACvE,CAEA,GAAI7B,KAAK,CAAE,CACT,mBACEV,KAAA,QAAKsC,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDzC,IAAA,MAAAyC,QAAA,CAAI7B,KAAK,CAAI,CAAC,cACdZ,IAAA,WACEwC,SAAS,CAAC,+CAA+C,CACzDE,OAAO,CAAEA,CAAA,GAAMrC,QAAQ,CAAC,QAAQ,CAAE,CAAAoC,QAAA,CACnC,eAED,CAAQ,CAAC,EACN,CAAC,CAEV,CAEA,GAAI,CAACnC,IAAI,CAAE,CACT,mBACEJ,KAAA,QAAKsC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BzC,IAAA,MAAAyC,QAAA,CAAG,gBAAc,CAAG,CAAC,cACrBzC,IAAA,WACEwC,SAAS,CAAC,+CAA+C,CACzDE,OAAO,CAAEA,CAAA,GAAMrC,QAAQ,CAAC,QAAQ,CAAE,CAAAoC,QAAA,CACnC,eAED,CAAQ,CAAC,EACN,CAAC,CAEV,CAEA,mBACEvC,KAAA,QAAKsC,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBvC,KAAA,QAAKsC,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDvC,KAAA,OAAIsC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,EAC/BnC,IAAI,CAACqC,QAAQ,eACZ3C,IAAA,QACE4C,GAAG,CAAEtC,IAAI,CAACqC,QAAS,CACnBE,GAAG,CAAE,GAAGvC,IAAI,CAACwC,IAAI,OAAQ,CACzBN,SAAS,CAAC,2BAA2B,CACtC,CACF,CACAlC,IAAI,CAACwC,IAAI,CACTxC,IAAI,CAACyC,GAAG,eAAI7C,KAAA,SAAMsC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,EAAC,GAAC,CAACnC,IAAI,CAACyC,GAAG,CAAC,GAAC,EAAM,CAAC,EACnE,CAAC,cACL/C,IAAA,WACEwC,SAAS,CAAC,0CAA0C,CACpDE,OAAO,CAAEA,CAAA,GAAMrC,QAAQ,CAAC,QAAQ,CAAE,CAAAoC,QAAA,CACnC,eAED,CAAQ,CAAC,EACN,CAAC,cAENvC,KAAA,QAAKsC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBvC,KAAA,QAAKsC,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDzC,IAAA,OAAIwC,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cACvDzC,IAAA,WACEwC,SAAS,CAAC,2CAA2C,CACrDE,OAAO,CAAEA,CAAA,GAAM3B,iBAAiB,CAAC,CAACD,cAAc,CAAE,CAAA2B,QAAA,CAEjD3B,cAAc,CAAG,QAAQ,CAAG,YAAY,CACnC,CAAC,EACN,CAAC,CAELA,cAAc,eACbZ,KAAA,QAAKsC,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3CzC,IAAA,OAAIwC,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cAC5DzC,IAAA,CAACF,UAAU,EACTkD,QAAQ,CAAExB,eAAgB,CAC1ByB,QAAQ,CAAEA,CAAA,GAAMlC,iBAAiB,CAAC,KAAK,CAAE,CAC1C,CAAC,EACC,CACN,cAEDf,IAAA,CAACH,UAAU,EACTW,OAAO,CAAEA,OAAQ,CACjB0C,QAAQ,CAAEpB,kBAAmB,CAC7BqB,QAAQ,CAAEf,kBAAmB,CAC9B,CAAC,EACC,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAjC,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}