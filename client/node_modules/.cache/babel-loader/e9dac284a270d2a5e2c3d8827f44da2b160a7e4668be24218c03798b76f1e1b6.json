{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\emil\\\\OneDrive\\\\Documents\\\\development\\\\apiDevelopment\\\\pubg-tournament-tracker\\\\client\\\\src\\\\components\\\\common\\\\LiveMatchFeed.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useSocket } from '../../contexts/SocketContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LiveMatchFeed = ({\n  matchId,\n  initialMatchData = null\n}) => {\n  _s();\n  var _matchData$data, _matchData$data$attri, _matchData$data2, _matchData$data2$attr, _matchData$data3, _matchData$data3$attr;\n  const [matchData, setMatchData] = useState(initialMatchData);\n  const [updates, setUpdates] = useState([]);\n  const {\n    joinMatch,\n    leaveMatch,\n    subscribeMatchUpdates\n  } = useSocket();\n  useEffect(() => {\n    // Update local state if initialMatchData changes\n    if (initialMatchData) {\n      setMatchData(initialMatchData);\n    }\n  }, [initialMatchData]);\n  useEffect(() => {\n    // Join the match room for real-time updates\n    joinMatch(matchId);\n\n    // Subscribe to match updates\n    const unsubscribe = subscribeMatchUpdates(data => {\n      if (data.matchId === matchId) {\n        // Update match data\n        setMatchData(prevData => ({\n          ...prevData,\n          ...data.matchData\n        }));\n\n        // Add update to the feed\n        setUpdates(prevUpdates => [{\n          id: Date.now(),\n          timestamp: new Date(),\n          type: data.type,\n          message: data.message,\n          data: data.eventData\n        }, ...prevUpdates.slice(0, 49) // Keep only the 50 most recent updates\n        ]);\n      }\n    });\n\n    // Clean up when unmounting\n    return () => {\n      leaveMatch(matchId);\n      unsubscribe();\n    };\n  }, [matchId, joinMatch, leaveMatch, subscribeMatchUpdates]);\n  if (!matchData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"live-match-feed\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Live Match Feed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Waiting for match data...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"live-match-feed\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Live Match Feed\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"match-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"match-map\",\n        children: [\"Map: \", ((_matchData$data = matchData.data) === null || _matchData$data === void 0 ? void 0 : (_matchData$data$attri = _matchData$data.attributes) === null || _matchData$data$attri === void 0 ? void 0 : _matchData$data$attri.mapName) || 'Unknown']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"match-gamemode\",\n        children: [\"Mode: \", ((_matchData$data2 = matchData.data) === null || _matchData$data2 === void 0 ? void 0 : (_matchData$data2$attr = _matchData$data2.attributes) === null || _matchData$data2$attr === void 0 ? void 0 : _matchData$data2$attr.gameMode) || 'Unknown']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), ((_matchData$data3 = matchData.data) === null || _matchData$data3 === void 0 ? void 0 : (_matchData$data3$attr = _matchData$data3.attributes) === null || _matchData$data3$attr === void 0 ? void 0 : _matchData$data3$attr.createdAt) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"match-time\",\n        children: [\"Started: \", new Date(matchData.data.attributes.createdAt).toLocaleString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"updates-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Live Updates\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), updates.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No live updates yet. Stay tuned!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"updates-list\",\n        children: updates.map(update => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: `update-item update-type-${update.type.toLowerCase()}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"update-time\",\n            children: new Date(update.timestamp).toLocaleTimeString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"update-content\",\n            children: update.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this)]\n        }, update.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(LiveMatchFeed, \"P0xxZ98RRqFxUBhcTfUAZaBzxGY=\", false, function () {\n  return [useSocket];\n});\n_c = LiveMatchFeed;\nexport default LiveMatchFeed;\nvar _c;\n$RefreshReg$(_c, \"LiveMatchFeed\");","map":{"version":3,"names":["React","useState","useEffect","useSocket","jsxDEV","_jsxDEV","LiveMatchFeed","matchId","initialMatchData","_s","_matchData$data","_matchData$data$attri","_matchData$data2","_matchData$data2$attr","_matchData$data3","_matchData$data3$attr","matchData","setMatchData","updates","setUpdates","joinMatch","leaveMatch","subscribeMatchUpdates","unsubscribe","data","prevData","prevUpdates","id","Date","now","timestamp","type","message","eventData","slice","className","children","fileName","_jsxFileName","lineNumber","columnNumber","attributes","mapName","gameMode","createdAt","toLocaleString","length","map","update","toLowerCase","toLocaleTimeString","_c","$RefreshReg$"],"sources":["C:/Users/emil/OneDrive/Documents/development/apiDevelopment/pubg-tournament-tracker/client/src/components/common/LiveMatchFeed.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSocket } from '../../contexts/SocketContext';\n\nconst LiveMatchFeed = ({ matchId, initialMatchData = null }) => {\n  const [matchData, setMatchData] = useState(initialMatchData);\n  const [updates, setUpdates] = useState([]);\n  const { joinMatch, leaveMatch, subscribeMatchUpdates } = useSocket();\n\n  useEffect(() => {\n    // Update local state if initialMatchData changes\n    if (initialMatchData) {\n      setMatchData(initialMatchData);\n    }\n  }, [initialMatchData]);\n\n  useEffect(() => {\n    // Join the match room for real-time updates\n    joinMatch(matchId);\n\n    // Subscribe to match updates\n    const unsubscribe = subscribeMatchUpdates((data) => {\n      if (data.matchId === matchId) {\n        // Update match data\n        setMatchData(prevData => ({\n          ...prevData,\n          ...data.matchData\n        }));\n\n        // Add update to the feed\n        setUpdates(prevUpdates => [\n          {\n            id: Date.now(),\n            timestamp: new Date(),\n            type: data.type,\n            message: data.message,\n            data: data.eventData\n          },\n          ...prevUpdates.slice(0, 49) // Keep only the 50 most recent updates\n        ]);\n      }\n    });\n\n    // Clean up when unmounting\n    return () => {\n      leaveMatch(matchId);\n      unsubscribe();\n    };\n  }, [matchId, joinMatch, leaveMatch, subscribeMatchUpdates]);\n\n  if (!matchData) {\n    return (\n      <div className=\"live-match-feed\">\n        <h3>Live Match Feed</h3>\n        <p>Waiting for match data...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"live-match-feed\">\n      <h3>Live Match Feed</h3>\n      \n      {/* Basic match info */}\n      <div className=\"match-info\">\n        <div className=\"match-map\">\n          Map: {matchData.data?.attributes?.mapName || 'Unknown'}\n        </div>\n        <div className=\"match-gamemode\">\n          Mode: {matchData.data?.attributes?.gameMode || 'Unknown'}\n        </div>\n        {matchData.data?.attributes?.createdAt && (\n          <div className=\"match-time\">\n            Started: {new Date(matchData.data.attributes.createdAt).toLocaleString()}\n          </div>\n        )}\n      </div>\n\n      {/* Live updates feed */}\n      <div className=\"updates-container\">\n        <h4>Live Updates</h4>\n        {updates.length === 0 ? (\n          <p>No live updates yet. Stay tuned!</p>\n        ) : (\n          <ul className=\"updates-list\">\n            {updates.map(update => (\n              <li key={update.id} className={`update-item update-type-${update.type.toLowerCase()}`}>\n                <div className=\"update-time\">\n                  {new Date(update.timestamp).toLocaleTimeString()}\n                </div>\n                <div className=\"update-content\">\n                  {update.message}\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default LiveMatchFeed;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}